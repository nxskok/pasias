<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 28 Logistic regression with nominal response | Problems and Solutions in Applied Statistics</title>
  <meta name="description" content="A set of problems and solutions, in R, on various parts of applied statistics" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 28 Logistic regression with nominal response | Problems and Solutions in Applied Statistics" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://ritsokiguess.site/pasias" />
  
  <meta property="og:description" content="A set of problems and solutions, in R, on various parts of applied statistics" />
  <meta name="github-repo" content="nxskok/pasias" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 28 Logistic regression with nominal response | Problems and Solutions in Applied Statistics" />
  
  <meta name="twitter:description" content="A set of problems and solutions, in R, on various parts of applied statistics" />
  

<meta name="author" content="Ken Butler" />


<meta name="date" content="2021-06-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="logistic-regression-with-ordinal-response.html"/>
<link rel="next" href="survival-analysis.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Problems and Solutions in Applied Statistics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#packages-used-somewhere-in-this-book"><i class="fa fa-check"></i>Packages used somewhere in this book</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-used-to-r-and-r-studio.html"><a href="getting-used-to-r-and-r-studio.html"><i class="fa fa-check"></i><b>1</b> Getting used to R and R Studio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-used-to-r-and-r-studio.html"><a href="getting-used-to-r-and-r-studio.html#running-r-studio-on-jupyterhub"><i class="fa fa-check"></i><b>1.1</b> Running R Studio on Jupyterhub</a></li>
<li class="chapter" data-level="1.2" data-path="getting-used-to-r-and-r-studio.html"><a href="getting-used-to-r-and-r-studio.html#getting-an-r-studio-cloud-account"><i class="fa fa-check"></i><b>1.2</b> Getting an R Studio Cloud account</a></li>
<li class="chapter" data-level="1.3" data-path="getting-used-to-r-and-r-studio.html"><a href="getting-used-to-r-and-r-studio.html#getting-started"><i class="fa fa-check"></i><b>1.3</b> Getting started</a></li>
<li class="chapter" data-level="1.4" data-path="getting-used-to-r-and-r-studio.html"><a href="getting-used-to-r-and-r-studio.html#reading-data-from-a-file"><i class="fa fa-check"></i><b>1.4</b> Reading data from a file</a></li>
<li class="chapter" data-level="1.5" data-path="getting-used-to-r-and-r-studio.html"><a href="getting-used-to-r-and-r-studio.html#reading-files-different-ways"><i class="fa fa-check"></i><b>1.5</b> Reading files different ways</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reading-in-data.html"><a href="reading-in-data.html"><i class="fa fa-check"></i><b>2</b> Reading in data</a></li>
<li class="chapter" data-level="3" data-path="drawing-graphs.html"><a href="drawing-graphs.html"><i class="fa fa-check"></i><b>3</b> Drawing graphs</a></li>
<li class="chapter" data-level="4" data-path="data-exploration.html"><a href="data-exploration.html"><i class="fa fa-check"></i><b>4</b> Data exploration</a></li>
<li class="chapter" data-level="5" data-path="working-with-dataframes.html"><a href="working-with-dataframes.html"><i class="fa fa-check"></i><b>5</b> Working with dataframes</a></li>
<li class="chapter" data-level="6" data-path="one-sample-inference.html"><a href="one-sample-inference.html"><i class="fa fa-check"></i><b>6</b> One-sample inference</a></li>
<li class="chapter" data-level="7" data-path="two-sample-inference.html"><a href="two-sample-inference.html"><i class="fa fa-check"></i><b>7</b> Two-sample inference</a></li>
<li class="chapter" data-level="8" data-path="power-and-sample-size.html"><a href="power-and-sample-size.html"><i class="fa fa-check"></i><b>8</b> Power and sample size</a></li>
<li class="chapter" data-level="9" data-path="the-sign-test.html"><a href="the-sign-test.html"><i class="fa fa-check"></i><b>9</b> The sign test</a></li>
<li class="chapter" data-level="10" data-path="mood-median-test.html"><a href="mood-median-test.html"><i class="fa fa-check"></i><b>10</b> Mood median test</a></li>
<li class="chapter" data-level="11" data-path="matched-pairs-t-and-sign-test.html"><a href="matched-pairs-t-and-sign-test.html"><i class="fa fa-check"></i><b>11</b> Matched pairs t and sign test</a></li>
<li class="chapter" data-level="12" data-path="normal-quantile-plots.html"><a href="normal-quantile-plots.html"><i class="fa fa-check"></i><b>12</b> Normal quantile plots</a>
<ul>
<li class="chapter" data-level="12.1" data-path="normal-quantile-plots.html"><a href="normal-quantile-plots.html#lengths-of-heliconia-flowers"><i class="fa fa-check"></i><b>12.1</b> Lengths of heliconia flowers</a></li>
<li class="chapter" data-level="12.2" data-path="normal-quantile-plots.html"><a href="normal-quantile-plots.html#ferritin-and-normality"><i class="fa fa-check"></i><b>12.2</b> Ferritin and normality</a></li>
<li class="chapter" data-level="12.3" data-path="normal-quantile-plots.html"><a href="normal-quantile-plots.html#lengths-of-heliconia-flowers-1"><i class="fa fa-check"></i><b>12.3</b> Lengths of heliconia flowers</a></li>
<li class="chapter" data-level="12.4" data-path="normal-quantile-plots.html"><a href="normal-quantile-plots.html#ferritin-and-normality-1"><i class="fa fa-check"></i><b>12.4</b> Ferritin and normality</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="analysis-of-variance.html"><a href="analysis-of-variance.html"><i class="fa fa-check"></i><b>13</b> Analysis of variance</a></li>
<li class="chapter" data-level="14" data-path="writing-reports.html"><a href="writing-reports.html"><i class="fa fa-check"></i><b>14</b> Writing reports</a></li>
<li class="chapter" data-level="15" data-path="learning-to-code.html"><a href="learning-to-code.html"><i class="fa fa-check"></i><b>15</b> Learning to code</a>
<ul>
<li class="chapter" data-level="15.1" data-path="learning-to-code.html"><a href="learning-to-code.html#introduction-1"><i class="fa fa-check"></i><b>15.1</b> Introduction</a></li>
<li class="chapter" data-level="15.2" data-path="learning-to-code.html"><a href="learning-to-code.html#data-and-pre-processing"><i class="fa fa-check"></i><b>15.2</b> Data and pre-processing</a></li>
<li class="chapter" data-level="15.3" data-path="learning-to-code.html"><a href="learning-to-code.html#analysis"><i class="fa fa-check"></i><b>15.3</b> Analysis</a></li>
<li class="chapter" data-level="15.4" data-path="learning-to-code.html"><a href="learning-to-code.html#conclusions-see-note-9"><i class="fa fa-check"></i><b>15.4</b> Conclusions (see note 9)</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="treating-dandruff.html"><a href="treating-dandruff.html"><i class="fa fa-check"></i><b>16</b> Treating dandruff</a>
<ul>
<li class="chapter" data-level="16.1" data-path="treating-dandruff.html"><a href="treating-dandruff.html#introduction-2"><i class="fa fa-check"></i><b>16.1</b> Introduction</a></li>
<li class="chapter" data-level="16.2" data-path="treating-dandruff.html"><a href="treating-dandruff.html#exploratory-analysis"><i class="fa fa-check"></i><b>16.2</b> Exploratory analysis</a></li>
<li class="chapter" data-level="16.3" data-path="treating-dandruff.html"><a href="treating-dandruff.html#analysis-of-variance-1"><i class="fa fa-check"></i><b>16.3</b> Analysis of Variance</a></li>
<li class="chapter" data-level="16.4" data-path="treating-dandruff.html"><a href="treating-dandruff.html#assessment-of-assumptions"><i class="fa fa-check"></i><b>16.4</b> Assessment of Assumptions</a></li>
<li class="chapter" data-level="16.5" data-path="treating-dandruff.html"><a href="treating-dandruff.html#conclusions"><i class="fa fa-check"></i><b>16.5</b> Conclusions</a></li>
<li class="chapter" data-level="16.6" data-path="treating-dandruff.html"><a href="treating-dandruff.html#end"><i class="fa fa-check"></i><b>16.6</b> End</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="tidying-data.html"><a href="tidying-data.html"><i class="fa fa-check"></i><b>17</b> Tidying data</a></li>
<li class="chapter" data-level="18" data-path="simple-regression.html"><a href="simple-regression.html"><i class="fa fa-check"></i><b>18</b> Simple regression</a></li>
<li class="chapter" data-level="19" data-path="multiple-regression.html"><a href="multiple-regression.html"><i class="fa fa-check"></i><b>19</b> Multiple regression</a></li>
<li class="chapter" data-level="20" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html"><i class="fa fa-check"></i><b>20</b> Regression with categorical variables</a>
<ul>
<li class="chapter" data-level="20.1" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#crickets-revisited"><i class="fa fa-check"></i><b>20.1</b> Crickets revisited</a></li>
<li class="chapter" data-level="20.2" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#pulse-rates-and-marching"><i class="fa fa-check"></i><b>20.2</b> Pulse rates and marching</a></li>
<li class="chapter" data-level="20.3" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#crickets-revisited-1"><i class="fa fa-check"></i><b>20.3</b> Crickets revisited</a></li>
<li class="chapter" data-level="20.4" data-path="regression-with-categorical-variables.html"><a href="regression-with-categorical-variables.html#pulse-rates-and-marching-1"><i class="fa fa-check"></i><b>20.4</b> Pulse rates and marching</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>21</b> Dates and times</a></li>
<li class="chapter" data-level="22" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>22</b> Functions</a></li>
<li class="chapter" data-level="23" data-path="vector-and-matrix-algebra.html"><a href="vector-and-matrix-algebra.html"><i class="fa fa-check"></i><b>23</b> Vector and matrix algebra</a>
<ul>
<li class="chapter" data-level="23.1" data-path="vector-and-matrix-algebra.html"><a href="vector-and-matrix-algebra.html#heights-and-foot-lengths-again"><i class="fa fa-check"></i><b>23.1</b> Heights and foot lengths again</a></li>
<li class="chapter" data-level="23.2" data-path="vector-and-matrix-algebra.html"><a href="vector-and-matrix-algebra.html#heights-and-foot-lengths-again-1"><i class="fa fa-check"></i><b>23.2</b> Heights and foot lengths again</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="the-bootstrap.html"><a href="the-bootstrap.html"><i class="fa fa-check"></i><b>24</b> The Bootstrap</a></li>
<li class="chapter" data-level="25" data-path="bayesian-statistics-with-stan.html"><a href="bayesian-statistics-with-stan.html"><i class="fa fa-check"></i><b>25</b> Bayesian Statistics with Stan</a></li>
<li class="chapter" data-level="26" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>26</b> Logistic regression</a></li>
<li class="chapter" data-level="27" data-path="logistic-regression-with-ordinal-response.html"><a href="logistic-regression-with-ordinal-response.html"><i class="fa fa-check"></i><b>27</b> Logistic regression with ordinal response</a></li>
<li class="chapter" data-level="28" data-path="logistic-regression-with-nominal-response.html"><a href="logistic-regression-with-nominal-response.html"><i class="fa fa-check"></i><b>28</b> Logistic regression with nominal response</a>
<ul>
<li class="chapter" data-level="28.1" data-path="logistic-regression-with-nominal-response.html"><a href="logistic-regression-with-nominal-response.html#finding-non-missing-values"><i class="fa fa-check"></i><b>28.1</b> Finding non-missing values</a></li>
<li class="chapter" data-level="28.2" data-path="logistic-regression-with-nominal-response.html"><a href="logistic-regression-with-nominal-response.html#european-social-survey-and-voting"><i class="fa fa-check"></i><b>28.2</b> European Social Survey and voting</a></li>
<li class="chapter" data-level="28.3" data-path="logistic-regression-with-nominal-response.html"><a href="logistic-regression-with-nominal-response.html#alligator-food"><i class="fa fa-check"></i><b>28.3</b> Alligator food</a></li>
<li class="chapter" data-level="28.4" data-path="logistic-regression-with-nominal-response.html"><a href="logistic-regression-with-nominal-response.html#crimes-in-san-francisco"><i class="fa fa-check"></i><b>28.4</b> Crimes in San Francisco</a></li>
<li class="chapter" data-level="28.5" data-path="logistic-regression-with-nominal-response.html"><a href="logistic-regression-with-nominal-response.html#crimes-in-san-francisco-the-data"><i class="fa fa-check"></i><b>28.5</b> Crimes in San Francisco – the data</a></li>
<li class="chapter" data-level="28.6" data-path="logistic-regression-with-nominal-response.html"><a href="logistic-regression-with-nominal-response.html#what-sports-do-these-athletes-play"><i class="fa fa-check"></i><b>28.6</b> What sports do these athletes play?</a></li>
<li class="chapter" data-level="28.7" data-path="logistic-regression-with-nominal-response.html"><a href="logistic-regression-with-nominal-response.html#finding-non-missing-values-1"><i class="fa fa-check"></i><b>28.7</b> Finding non-missing values</a></li>
<li class="chapter" data-level="28.8" data-path="logistic-regression-with-nominal-response.html"><a href="logistic-regression-with-nominal-response.html#european-social-survey-and-voting-1"><i class="fa fa-check"></i><b>28.8</b> European Social Survey and voting</a></li>
<li class="chapter" data-level="28.9" data-path="logistic-regression-with-nominal-response.html"><a href="logistic-regression-with-nominal-response.html#alligator-food-1"><i class="fa fa-check"></i><b>28.9</b> Alligator food</a></li>
<li class="chapter" data-level="28.10" data-path="logistic-regression-with-nominal-response.html"><a href="logistic-regression-with-nominal-response.html#crimes-in-san-francisco-1"><i class="fa fa-check"></i><b>28.10</b> Crimes in San Francisco</a></li>
<li class="chapter" data-level="28.11" data-path="logistic-regression-with-nominal-response.html"><a href="logistic-regression-with-nominal-response.html#crimes-in-san-francisco-the-data-1"><i class="fa fa-check"></i><b>28.11</b> Crimes in San Francisco – the data</a></li>
<li class="chapter" data-level="28.12" data-path="logistic-regression-with-nominal-response.html"><a href="logistic-regression-with-nominal-response.html#what-sports-do-these-athletes-play-1"><i class="fa fa-check"></i><b>28.12</b> What sports do these athletes play?</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="survival-analysis.html"><a href="survival-analysis.html"><i class="fa fa-check"></i><b>29</b> Survival analysis</a></li>
<li class="chapter" data-level="30" data-path="analysis-of-variance-revisited.html"><a href="analysis-of-variance-revisited.html"><i class="fa fa-check"></i><b>30</b> Analysis of variance revisited</a></li>
<li class="chapter" data-level="31" data-path="analysis-of-covariance.html"><a href="analysis-of-covariance.html"><i class="fa fa-check"></i><b>31</b> Analysis of covariance</a></li>
<li class="chapter" data-level="32" data-path="multivariate-analysis-of-variance.html"><a href="multivariate-analysis-of-variance.html"><i class="fa fa-check"></i><b>32</b> Multivariate analysis of variance</a></li>
<li class="chapter" data-level="33" data-path="repeated-measures.html"><a href="repeated-measures.html"><i class="fa fa-check"></i><b>33</b> Repeated measures</a></li>
<li class="chapter" data-level="34" data-path="discriminant-analysis.html"><a href="discriminant-analysis.html"><i class="fa fa-check"></i><b>34</b> Discriminant analysis</a></li>
<li class="chapter" data-level="35" data-path="hierarchical-cluster-analysis.html"><a href="hierarchical-cluster-analysis.html"><i class="fa fa-check"></i><b>35</b> Hierarchical cluster analysis</a></li>
<li class="chapter" data-level="36" data-path="k-means-cluster-analysis.html"><a href="k-means-cluster-analysis.html"><i class="fa fa-check"></i><b>36</b> K-means cluster analysis</a></li>
<li class="chapter" data-level="37" data-path="drawing-maps-with-leaflet.html"><a href="drawing-maps-with-leaflet.html"><i class="fa fa-check"></i><b>37</b> Drawing maps with Leaflet</a></li>
<li class="chapter" data-level="38" data-path="multidimensional-scaling.html"><a href="multidimensional-scaling.html"><i class="fa fa-check"></i><b>38</b> Multidimensional Scaling</a></li>
<li class="chapter" data-level="39" data-path="principal-components.html"><a href="principal-components.html"><i class="fa fa-check"></i><b>39</b> Principal Components</a>
<ul>
<li class="chapter" data-level="39.1" data-path="principal-components.html"><a href="principal-components.html#the-weather-somewhere"><i class="fa fa-check"></i><b>39.1</b> The weather, somewhere</a></li>
<li class="chapter" data-level="39.2" data-path="principal-components.html"><a href="principal-components.html#the-weather-somewhere-1"><i class="fa fa-check"></i><b>39.2</b> The weather, somewhere</a></li>
</ul></li>
<li class="chapter" data-level="40" data-path="factor-analysis.html"><a href="factor-analysis.html"><i class="fa fa-check"></i><b>40</b> Factor Analysis</a></li>
<li class="chapter" data-level="41" data-path="frequency-table-analysis.html"><a href="frequency-table-analysis.html"><i class="fa fa-check"></i><b>41</b> Frequency table analysis</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Problems and Solutions in Applied Statistics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="logistic-regression-with-nominal-response" class="section level1" number="28">
<h1><span class="header-section-number">Chapter 28</span> Logistic regression with nominal response</h1>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="logistic-regression-with-nominal-response.html#cb254-1"></a><span class="kw">library</span>(nnet)</span>
<span id="cb254-2"><a href="logistic-regression-with-nominal-response.html#cb254-2"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<div id="finding-non-missing-values" class="section level2" number="28.1">
<h2><span class="header-section-number">28.1</span> Finding non-missing values</h2>
<p><a name="part:prepare-next">*</a> This is to prepare you for something in the next
question. It’s meant to be easy.</p>
<p>In R, the code <code>NA</code> stands for “missing value” or
“value not known”. In R, <code>NA</code> should not have quotes around
it. (It is a special code, not a piece of text.)</p>
<ol style="list-style-type: lower-alpha">
<li><p>Create a vector <code>v</code> that contains some numbers and some
missing values, using <code>c()</code>. Put those values into a
one-column data frame.</p></li>
<li><p>Obtain a new column containing <code>is.na(v)</code>. When is this true and when is this false?</p></li>
<li><p>The symbol <code>!</code> means “not” in R (and other
programming languages). What does <code>!is.na(v)</code> do? Create a
new column containing that.</p></li>
<li><p>Use <code>filter</code> to display just the
rows of your data frame that have a non-missing value of <code>v</code>.</p></li>
</ol>
</div>
<div id="european-social-survey-and-voting" class="section level2" number="28.2">
<h2><span class="header-section-number">28.2</span> European Social Survey and voting</h2>
<p>The European Social Survey is a giant survey carried out
across Europe covering demographic information, attitudes to and
amount of education, politics and so on. In this question, we will
investigate what might make British people vote for a certain
political party.</p>
<p>The information for this question is in a (large) spreadsheet at
<a href="http://ritsokiguess.site/datafiles/ess.csv">link</a>. There is also a
“codebook” at
<a href="http://ritsokiguess.site/datafiles/ess-codebook.pdf">link</a> that
tells you what all the variables are. The ones we will use are the
last five columns of the spreadsheet, described on pages 11 onwards of
the codebook. (I could have given you more, but I didn’t want to make
this any more complicated than it already was.)</p>
<ol style="list-style-type: lower-alpha">
<li><p>Read in the <code>.csv</code> file, and verify that you have lots
of rows and columns.</p></li>
<li><p><a name="part:whatvar">*</a> Use the codebook to find out what the columns
<code>prtvtgb</code>, <code>gndr</code>, <code>agea</code>, <code>eduyrs</code> and
<code>inwtm</code> are. What do the values 1 and 2 for <code>gndr</code>
mean? (You don’t, at this point, have to worry about the values for
the other variables.)</p></li>
<li><p>The three major political parties in Britain are the
Conservative, Labour and Liberal Democrat. (These, for your
information, correspond roughly to the Canadian Progressive
Conservative, NDP and Liberal parties.) For the variable that
corresponds to “political party voted for at the last election”,
which values correspond to these three parties?</p></li>
<li><p>Normally, I would give you a tidied-up
data set. But I figure you could use some practice tidying this one
up. As the codebook shows, there are some numerical codes for
missing values, and we want to omit those.
We want just the columns <code>prtvtgb</code> through <code>inwtm</code>
from the right side of the spreadsheet. Use <code>dplyr</code> or
<code>tidyr</code> tools to (i) select only these columns, (ii) include
the rows that correspond to people who voted for one of the three
major parties, (iii) include the rows that have an age at interview
less than 999, (iv) include the rows that have less than 40 years of
education, (v) include the rows that are not missing on
<code>inwtm</code> (use the idea from Question~<a href="#part:prepare-next">here</a>
for (v)). The last four of those (the inclusion of rows) can be
done in one go.</p></li>
<li><p>Why is my response variable nominal rather than ordinal? How can I tell?
Which R function should I use, therefore, to fit my model?</p></li>
<li><p><a name="part:full">*</a> Take the political party voted for, and turn it into a
factor, by feeding it into <code>factor</code>.
Fit an appropriate model to predict political party voted
for at the last election (as a factor) from all the other
variables. Gender is really a categorical variable too, but since
there are only two possible values it can be treated as a number.</p></li>
<li><p>We have a lot of explanatory variables. The standard way to
test whether we need all of them is to take one of them out at a time,
and test which ones we can remove. This is a lot of work. We won’t do
that. Instead,
the R function <code>step</code> does what you want. You feed <code>step</code>
two things: a fitted model object, and the option <code>trace=0</code>
(otherwise you get a lot of output). The final part of the output from
<code>step</code> tells you which explanatory variables you need to keep.
Run <code>step</code> on your fitted model. Which explanatory variables
need to stay in the model here?</p></li>
<li><p>Fit the model indicated by <code>step</code> (in the last part).</p></li>
<li><p>I didn’t think that interview length could possibly be
relevant to which party a person voted for. Test whether interview
length can be removed from your model of the last part. What do you
conclude? (Note that <code>step</code> and this test may disagree.)</p></li>
<li><p>Use your best model to obtain predictions from some
suitably chosen combinations of values of the explanatory variables
that remain. (If you have quantitative explanatory variables left,
you could use their first and third quartiles as values to predict
from. Running <code>summary</code> on the data frame will get summaries
of all the variables.)</p></li>
<li><p>What is the effect of increasing age? What is the effect of
an increase in years of education?</p></li>
</ol>
</div>
<div id="alligator-food" class="section level2" number="28.3">
<h2><span class="header-section-number">28.3</span> Alligator food</h2>
<p>What do alligators most like to eat? 219 alligators were captured
in four Florida lakes. Each alligator’s stomach contents were
observed, and the food that the alligator had eaten was classified
into one of five categories: fish, invertebrates (such as snails or
insects), reptiles (such as turtles), birds, and “other” (such as
amphibians, plants or rocks). The researcher noted for each alligator
what that alligator had most of in its stomach, as well as the gender
of each alligator and whether it was “large” or “small” (greater
or less than 2.3 metres in length). The data can be found in
<a href="http://ritsokiguess.site/datafiles/alligator.txt">link</a>. The
numbers in the data set (apart from the first column) are all
frequencies. (You can ignore that first column “profile”.)</p>
<p>Our aim is to predict food type from the other variables.</p>
<ol style="list-style-type: lower-alpha">
<li><p>Read in the data and display the first few lines. Describe
how the data are not “tidy”.</p></li>
<li><p>Use <code>pivot_longer</code> to arrange the data
suitably for analysis (which will be using
<code>multinom</code>). Demonstrate (by looking at the first few rows
of your new data frame) that you now have something tidy.</p></li>
<li><p>What is different about this problem, compared to
Question <a href="#q:abortion">here</a>, that would make
<code>multinom</code> the right tool to use?</p></li>
<li><p>Fit a suitable multinomial model predicting food type from
gender, size and lake. Does each row represent one alligator or more
than one? If more than one, account for this in your modelling.</p></li>
<li><p>Do a test to see whether <code>Gender</code> should stay in
the model. (This will entail fitting another model.) What do you conclude?</p></li>
<li><p>Predict the probability that an alligator
prefers each food type, given its size, gender (if necessary) and
the lake it was found
in, using the more appropriate of the two models that you have
fitted so far. This means (i) obtaining all the sizes and lake
names, (ii)
making a data frame for prediction, and (iii) obtaining and
displaying the predicted probabilities.</p></li>
<li><p>What do you think is the most important way in which the
lakes differ? (Hint: look at where the biggest predicted
probabilities are.)</p></li>
<li><p>How would you describe the major difference between the
diets of the small and large alligators?</p></li>
</ol>
</div>
<div id="crimes-in-san-francisco" class="section level2" number="28.4">
<h2><span class="header-section-number">28.4</span> Crimes in San Francisco</h2>
<p>The data in
<a href="http://ritsokiguess.site/datafiles/sfcrime1.csv">link</a> is a subset
of a huge
dataset of crimes committed in San Francisco between 2003 and
2015. The variables are:</p>
<ul>
<li><p><code>Dates</code>: the date and time of the crime</p></li>
<li><p><code>Category</code>: the category of crime, eg. “larceny” or
“vandalism” (response).</p></li>
<li><p><code>Descript</code>: detailed description of crime.</p></li>
<li><p><code>DayOfWeek</code>: the day of the week of the crime.</p></li>
<li><p><code>PdDistrict</code>: the name of the San Francisco Police
Department district in which the crime took place.</p></li>
<li><p><code>Resolution</code>: how the crime was resolved</p></li>
<li><p><code>Address</code>: approximate street address of crime</p></li>
<li><p><code>X</code>: longitude</p></li>
<li><p><code>Y</code>: latitude</p></li>
</ul>
<p>Our aim is to see whether the category of crime depends on the day of
the week and the district in which it occurred. However, there are a
lot of crime categories, so we will focus on the top four
“interesting” ones, which are the ones included in this data file.</p>
<p>Some of the model-fitting takes a while (you’ll see why below). If
you’re using R Markdown, you can wait for the models to fit each time
you re-run your document, or insert <code>cache=T</code> in the top line
of your code chunk (the one with <code>r</code> in curly brackets in it,
above the actual code). Put a comma and the <code>cache=T</code> inside
the curly brackets. What that does is to re-run that code chunk only
if it changes; if it hasn’t changed it will use the saved results from
last time it was run. That can save you a lot of waiting around.</p>
<ol style="list-style-type: lower-alpha">
<li><p>Read in the data and display the dataset (or, at least,
part of it).</p></li>
<li><p>Fit a multinomial logistic
regression that predicts crime category from day of week and
district. (You don’t need to look at it.) The model-fitting produces
some output. (If you’re using R Markdown, that will
come with it.)</p></li>
<li><p>Fit a model that predicts Category from only the
district. Hand in the output from the fitting process as well.</p></li>
<li><p>Use <code>anova</code> to compare the two models you just
obtained. What does the <code>anova</code> tell you?</p></li>
<li><p>Using your preferred model, obtain predicted probabilities
that a crime will be of each of these four categories for each day of
the week in the <code>TENDERLOIN</code> district (the name is ALL
CAPS). This will mean constructing a data frame to predict from,
obtaining the predictions and then displaying them suitably.</p></li>
<li><p>Describe briefly how the weekend days Saturday and Sunday
differ from the rest.</p></li>
</ol>
</div>
<div id="crimes-in-san-francisco-the-data" class="section level2" number="28.5">
<h2><span class="header-section-number">28.5</span> Crimes in San Francisco – the data</h2>
<p>The data in <a href="http://utsc.utoronto.ca/~butler/d29/sfcrime.csv">link</a> is a huge dataset of crimes committed in San
Francisco between 2003 and 2015. The variables are:</p>
<ul>
<li><p><code>Dates</code>: the date and time of the crime</p></li>
<li><p><code>Category</code>: the category of crime, eg. “larceny” or
“vandalism” (response).</p></li>
<li><p><code>Descript</code>: detailed description of crime.</p></li>
<li><p><code>DayOfWeek</code>: the day of the week of the crime.</p></li>
<li><p><code>PdDistrict</code>: the name of the San Francisco Police
Department district in which the crime took place.</p></li>
<li><p><code>Resolution</code>: how the crime was resolved</p></li>
<li><p><code>Address</code>: approximate street address of crime</p></li>
<li><p><code>X</code>: longitude</p></li>
<li><p><code>Y</code>: latitude</p></li>
</ul>
<p>Our aim is to see whether the category of crime depends on the day of
the week and the district in which it occurred. However, there are a
lot of crime categories, so we will focus on the top four
“interesting” ones, which we will have to discover.</p>
<ol style="list-style-type: lower-alpha">
<li><p>Read in the data and verify that you have these columns and a
lot of rows. (The data may take a moment to read in. You will see why.)</p></li>
<li><p>How is the response variable here different to the one in
the question about steak preferences (and therefore why would
<code>multinom</code> from package <code>nnet</code> be the method of choice)?</p></li>
<li><p>Find out which crime categories there are, and
arrange them in order of how many crimes there were in each
category.</p></li>
<li><p>Which are the four most frequent “interesting” crime
categories, that is to say, not including “other offenses” and
“non-criminal”? Get them into a vector called
<code>my.crimes</code>. See if you can find a way of doing this that
doesn’t involve typing them in (for full marks).</p></li>
<li><p>(Digression, but needed for the next part.) The R vector
<code>letters</code> contains the lowercase letters from <code>a</code> to
<code>z</code>. Consider the vector <code>('a','m',3,'Q')</code>. Some of
these are found amongst the lowercase letters, and some not. Type
these into a vector <code>v</code> and explain briefly why
<code>v %in% letters</code> produces what it does.</p></li>
<li><p>We are going to <code>filter</code> only the rows of our data frame that
have one of the crimes in <code>my.crimes</code> as their
<code>Category</code>. Also, <code>select</code> only the columns
<code>Category</code>, <code>DayOfWeek</code> and <code>PdDistrict</code>. Save
the resulting data frame and display its structure. (You should have a
lot fewer rows than you did before.)</p></li>
<li><p>Save these data in a file <code>sfcrime1.csv</code>.</p></li>
</ol>
</div>
<div id="what-sports-do-these-athletes-play" class="section level2" number="28.6">
<h2><span class="header-section-number">28.6</span> What sports do these athletes play?</h2>
<p>The data at
<a href="http://ritsokiguess.site/datafiles/ais.txt">link</a> are physical
and physiological measurements of 202 male and female Australian elite
athletes. The data values are separated by <em>tabs</em>. We are going
to see whether we can predict the sport an athlete plays from their
height and weight.</p>
<p>The sports, if you care, are respectively basketball,
“field athletics” (eg. shot put, javelin throw, long jump etc.),
gymnastics, netball, rowing, swimming, 400m running, tennis, sprinting
(100m or 200m running), water polo.</p>
<ol style="list-style-type: lower-alpha">
<li><p>Read in the data and display the first few rows.</p></li>
<li><p>Make a scatterplot of height vs. weight, with the points
coloured by what sport the athlete plays. Put height on the <span class="math inline">\(x\)</span>-axis
and weight on the <span class="math inline">\(y\)</span>-axis.</p></li>
<li><p>Explain briefly why a multinomial model (<code>multinom</code>
from <code>nnet</code>) would be the best thing to use to predict sport
played from the other variables.</p></li>
<li><p>Fit a suitable model for predicting sport played from
height and weight. (You don’t need to look at the results.) 100
steps isn’t quite enough, so set <code>maxit</code> equal to a larger
number to allow the estimation to finish.</p></li>
<li><p>Demonstrate using <code>anova</code> that <code>Wt</code> should
not be removed from this model.</p></li>
<li><p>Make a data frame consisting of all combinations of
<code>Ht</code> 160, 180 and 200 (cm), and <code>Wt</code> 50, 75, and 100
(kg), and use it to obtain predicted probabilities of athletes of
those heights and weights playing each of the sports. Display the
results. You might have to display them smaller, or reduce the
number of decimal places<a href="#fn36" class="footnote-ref" id="fnref36"><sup>36</sup></a>
to fit them on the page.</p></li>
<li><p>For an athlete who is 180 cm tall and weighs 100 kg, what
sport would you guess they play? How sure are you that you are
right? Explain briefly.</p></li>
</ol>
<p>My solutions follow:</p>
</div>
<div id="finding-non-missing-values-1" class="section level2" number="28.7">
<h2><span class="header-section-number">28.7</span> Finding non-missing values</h2>
<p><a name="part:prepare-next">*</a> This is to prepare you for something in the next
question. It’s meant to be easy.</p>
<p>In R, the code <code>NA</code> stands for “missing value” or
“value not known”. In R, <code>NA</code> should not have quotes around
it. (It is a special code, not a piece of text.)</p>
<ol style="list-style-type: lower-alpha">
<li>Create a vector <code>v</code> that contains some numbers and some
missing values, using <code>c()</code>. Put those values into a
one-column data frame.</li>
</ol>
<p>Solution</p>
<p>Like this. The arrangement of numbers and missing values doesn’t
matter, as long as you have some of each:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="logistic-regression-with-nominal-response.html#cb255-1"></a>v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="ot">NA</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">9</span>, <span class="ot">NA</span>, <span class="dv">11</span>)</span>
<span id="cb255-2"><a href="logistic-regression-with-nominal-response.html#cb255-2"></a>mydata &lt;-<span class="st"> </span><span class="kw">tibble</span>(v)</span>
<span id="cb255-3"><a href="logistic-regression-with-nominal-response.html#cb255-3"></a>mydata</span></code></pre></div>
<pre><code>## # A tibble: 9 x 1
##       v
##   &lt;dbl&gt;
## 1     1
## 2     2
## 3    NA
## 4     4
## 5     5
## 6     6
## 7     9
## 8    NA
## 9    11</code></pre>
<p>This has one column called <code>v</code>.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Obtain a new column containing <code>is.na(v)</code>. When is this true and when is this false?</li>
</ol>
<p>Solution</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="logistic-regression-with-nominal-response.html#cb257-1"></a>mydata &lt;-<span class="st"> </span>mydata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">isna =</span> <span class="kw">is.na</span>(v))</span>
<span id="cb257-2"><a href="logistic-regression-with-nominal-response.html#cb257-2"></a>mydata</span></code></pre></div>
<pre><code>## # A tibble: 9 x 2
##       v isna 
##   &lt;dbl&gt; &lt;lgl&gt;
## 1     1 FALSE
## 2     2 FALSE
## 3    NA TRUE 
## 4     4 FALSE
## 5     5 FALSE
## 6     6 FALSE
## 7     9 FALSE
## 8    NA TRUE 
## 9    11 FALSE</code></pre>
<p>This is <code>TRUE</code> if the corresponding element of <code>v</code> is
missing (in my case, the third value and the second-last one), and
<code>FALSE</code> otherwise (when there is an actual value there).</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>The symbol <code>!</code> means “not” in R (and other
programming languages). What does <code>!is.na(v)</code> do? Create a
new column containing that.</li>
</ol>
<p>Solution</p>
<p>Try it and see. Give it whatever name you like. My name reflects
that I know what it’s going to do:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="logistic-regression-with-nominal-response.html#cb259-1"></a>mydata &lt;-<span class="st"> </span>mydata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">notisna =</span> <span class="op">!</span><span class="kw">is.na</span>(v))</span>
<span id="cb259-2"><a href="logistic-regression-with-nominal-response.html#cb259-2"></a>mydata</span></code></pre></div>
<pre><code>## # A tibble: 9 x 3
##       v isna  notisna
##   &lt;dbl&gt; &lt;lgl&gt; &lt;lgl&gt;  
## 1     1 FALSE TRUE   
## 2     2 FALSE TRUE   
## 3    NA TRUE  FALSE  
## 4     4 FALSE TRUE   
## 5     5 FALSE TRUE   
## 6     6 FALSE TRUE   
## 7     9 FALSE TRUE   
## 8    NA TRUE  FALSE  
## 9    11 FALSE TRUE</code></pre>
<p>This is the logical opposite of <code>is.na</code>: it’s true if there is
a value, and false if it’s missing.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="4" style="list-style-type: lower-alpha">
<li>Use <code>filter</code> to display just the
rows of your data frame that have a non-missing value of <code>v</code>.</li>
</ol>
<p>Solution</p>
<p><code>filter</code> takes a column to say which rows to pick, in
which case the column should contain something that either <em>is</em>
<code>TRUE</code> or <code>FALSE</code>, or something that can be
interpreted that way:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="logistic-regression-with-nominal-response.html#cb261-1"></a>mydata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(notisna)</span></code></pre></div>
<pre><code>## # A tibble: 7 x 3
##       v isna  notisna
##   &lt;dbl&gt; &lt;lgl&gt; &lt;lgl&gt;  
## 1     1 FALSE TRUE   
## 2     2 FALSE TRUE   
## 3     4 FALSE TRUE   
## 4     5 FALSE TRUE   
## 5     6 FALSE TRUE   
## 6     9 FALSE TRUE   
## 7    11 FALSE TRUE</code></pre>
<p>or you can provide <code>filter</code> something that can be calculated
from what’s in the data frame, and also returns something that is
either true or false:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="logistic-regression-with-nominal-response.html#cb263-1"></a>mydata <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(v))</span></code></pre></div>
<pre><code>## # A tibble: 7 x 3
##       v isna  notisna
##   &lt;dbl&gt; &lt;lgl&gt; &lt;lgl&gt;  
## 1     1 FALSE TRUE   
## 2     2 FALSE TRUE   
## 3     4 FALSE TRUE   
## 4     5 FALSE TRUE   
## 5     6 FALSE TRUE   
## 6     9 FALSE TRUE   
## 7    11 FALSE TRUE</code></pre>
<p>In either case, I only have non-missing values of <code>v</code>.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="european-social-survey-and-voting-1" class="section level2" number="28.8">
<h2><span class="header-section-number">28.8</span> European Social Survey and voting</h2>
<p>The European Social Survey is a giant survey carried out
across Europe covering demographic information, attitudes to and
amount of education, politics and so on. In this question, we will
investigate what might make British people vote for a certain
political party.</p>
<p>The information for this question is in a (large) spreadsheet at
<a href="http://ritsokiguess.site/datafiles/ess.csv">link</a>. There is also a
“codebook” at
<a href="http://ritsokiguess.site/datafiles/ess-codebook.pdf">link</a> that
tells you what all the variables are. The ones we will use are the
last five columns of the spreadsheet, described on pages 11 onwards of
the codebook. (I could have given you more, but I didn’t want to make
this any more complicated than it already was.)</p>
<ol style="list-style-type: lower-alpha">
<li>Read in the <code>.csv</code> file, and verify that you have lots
of rows and columns.</li>
</ol>
<p>Solution</p>
<p>The obvious way. Printing it out will display some of the data
and tell you how many rows and columns you have:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="logistic-regression-with-nominal-response.html#cb265-1"></a>my_url &lt;-<span class="st"> &quot;http://ritsokiguess.site/datafiles/ess.csv&quot;</span></span>
<span id="cb265-2"><a href="logistic-regression-with-nominal-response.html#cb265-2"></a>ess &lt;-<span class="st"> </span><span class="kw">read_csv</span>(my_url)</span></code></pre></div>
<pre><code>## 
## ── Column specification ────────────────────────────────────────────────────────
## cols(
##   cntry = col_character(),
##   cname = col_character(),
##   cedition = col_double(),
##   cproddat = col_character(),
##   cseqno = col_double(),
##   name = col_character(),
##   essround = col_double(),
##   edition = col_double(),
##   idno = col_double(),
##   dweight = col_double(),
##   pspwght = col_double(),
##   pweight = col_double(),
##   prtvtgb = col_double(),
##   gndr = col_double(),
##   agea = col_double(),
##   eduyrs = col_double(),
##   inwtm = col_double()
## )</code></pre>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="logistic-regression-with-nominal-response.html#cb267-1"></a>ess</span></code></pre></div>
<pre><code>## # A tibble: 2,286 x 17
##    cntry cname   cedition cproddat cseqno name   essround edition   idno dweight
##    &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
##  1 GB    ESS1-6…        1 26.11.2… 134168 ESS6e…        6     2.1 101014   1.01 
##  2 GB    ESS1-6…        1 26.11.2… 134169 ESS6e…        6     2.1 101048   2.02 
##  3 GB    ESS1-6…        1 26.11.2… 134170 ESS6e…        6     2.1 101055   1.01 
##  4 GB    ESS1-6…        1 26.11.2… 134171 ESS6e…        6     2.1 101089   0.505
##  5 GB    ESS1-6…        1 26.11.2… 134172 ESS6e…        6     2.1 101097   0.505
##  6 GB    ESS1-6…        1 26.11.2… 134173 ESS6e…        6     2.1 101113   1.01 
##  7 GB    ESS1-6…        1 26.11.2… 134174 ESS6e…        6     2.1 101121   0.505
##  8 GB    ESS1-6…        1 26.11.2… 134175 ESS6e…        6     2.1 101139   0.505
##  9 GB    ESS1-6…        1 26.11.2… 134176 ESS6e…        6     2.1 101154   1.01 
## 10 GB    ESS1-6…        1 26.11.2… 134177 ESS6e…        6     2.1 101170   1.01 
## # … with 2,276 more rows, and 7 more variables: pspwght &lt;dbl&gt;, pweight &lt;dbl&gt;,
## #   prtvtgb &lt;dbl&gt;, gndr &lt;dbl&gt;, agea &lt;dbl&gt;, eduyrs &lt;dbl&gt;, inwtm &lt;dbl&gt;</code></pre>
<p>2286 rows and 17 columns.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="2" style="list-style-type: lower-alpha">
<li><a name="part:whatvar">*</a> Use the codebook to find out what the columns
<code>prtvtgb</code>, <code>gndr</code>, <code>agea</code>, <code>eduyrs</code> and
<code>inwtm</code> are. What do the values 1 and 2 for <code>gndr</code>
mean? (You don’t, at this point, have to worry about the values for
the other variables.)</li>
</ol>
<p>Solution</p>
<p>Respectively, political party voted for at last election, gender
(of respondent), age at interview, years of full-time education,
length of interview (in minutes). For <code>gndr</code>, male is 1
and female is 2.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>The three major political parties in Britain are the
Conservative, Labour and Liberal Democrat. (These, for your
information, correspond roughly to the Canadian Progressive
Conservative, NDP and Liberal parties.) For the variable that
corresponds to “political party voted for at the last election”,
which values correspond to these three parties?</li>
</ol>
<p>Solution</p>
<p>1, 2 and 3 respectively. (That was easy!)</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="4" style="list-style-type: lower-alpha">
<li>Normally, I would give you a tidied-up
data set. But I figure you could use some practice tidying this one
up. As the codebook shows, there are some numerical codes for
missing values, and we want to omit those.
We want just the columns <code>prtvtgb</code> through <code>inwtm</code>
from the right side of the spreadsheet. Use <code>dplyr</code> or
<code>tidyr</code> tools to (i) select only these columns, (ii) include
the rows that correspond to people who voted for one of the three
major parties, (iii) include the rows that have an age at interview
less than 999, (iv) include the rows that have less than 40 years of
education, (v) include the rows that are not missing on
<code>inwtm</code> (use the idea from Question~<a href="#part:prepare-next">here</a>
for (v)). The last four of those (the inclusion of rows) can be
done in one go.</li>
</ol>
<p>Solution</p>
<p>This seems to call for a pipeline. The major parties are numbered 1,
2 and 3, so we can select the ones less than 4 (or
<code>&lt;=3</code>). The reference back to the last question is a hint
to use <code>!is.na()</code>.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="logistic-regression-with-nominal-response.html#cb269-1"></a>ess <span class="op">%&gt;%</span></span>
<span id="cb269-2"><a href="logistic-regression-with-nominal-response.html#cb269-2"></a><span class="st">  </span><span class="kw">select</span>(prtvtgb<span class="op">:</span>inwtm) <span class="op">%&gt;%</span></span>
<span id="cb269-3"><a href="logistic-regression-with-nominal-response.html#cb269-3"></a><span class="st">  </span><span class="kw">filter</span>(prtvtgb <span class="op">&lt;</span><span class="st"> </span><span class="dv">4</span>, agea <span class="op">&lt;</span><span class="st"> </span><span class="dv">999</span>, eduyrs <span class="op">&lt;</span><span class="st"> </span><span class="dv">40</span>, <span class="op">!</span><span class="kw">is.na</span>(inwtm)) -&gt;<span class="st"> </span>ess.major</span></code></pre></div>
<p>You might get a weird error in <code>select</code>, something about
“unused argument”. If this happens to you, it’s <em>not</em> because
you used <code>select</code> wrong, it’s because you used the wrong
<code>select</code>! There is one in <code>MASS</code>, and you need to make
sure that this package is “detached” so that you use the
<code>select</code> you want, namely the one in <code>dplyr</code>, loaded
with the <code>tidyverse</code>. Use the instructions at the end of the
mobile phones question or the abortion question to do this.</p>
<p>The other way around this is to say, instead of <code>select</code>,
<code>dplyr::select</code> with two colons. This means
“the <code>select</code> that lives in <code>dplyr</code>, no other”, and is what
Wikipedia calls “disambiguation”: out of several things with the
same name, you say which one you mean.</p>
<p>If you do the pipeline, you will probably <em>not</em> get it right the
first time. (I didn’t.) For debugging, try out one step at a time, and
summarize what you have so far, so that you can check it for
correctness. A handy trick for that is to make the last piece of your
pipeline <code>summary()</code>, which produces a summary of the columns of
the resulting data frame. For example, I first did this (note that my
<code>filter</code> is a lot simpler than the one above):</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="logistic-regression-with-nominal-response.html#cb270-1"></a>ess <span class="op">%&gt;%</span></span>
<span id="cb270-2"><a href="logistic-regression-with-nominal-response.html#cb270-2"></a><span class="st">  </span><span class="kw">select</span>(prtvtgb<span class="op">:</span>inwtm) <span class="op">%&gt;%</span></span>
<span id="cb270-3"><a href="logistic-regression-with-nominal-response.html#cb270-3"></a><span class="st">  </span><span class="kw">filter</span>(prtvtgb <span class="op">&lt;</span><span class="st"> </span><span class="dv">4</span>, <span class="op">!</span><span class="kw">is.na</span>(inwtm)) <span class="op">%&gt;%</span></span>
<span id="cb270-4"><a href="logistic-regression-with-nominal-response.html#cb270-4"></a><span class="st">  </span><span class="kw">summary</span>()</span></code></pre></div>
<pre><code>##     prtvtgb           gndr            agea            eduyrs     
##  Min.   :1.000   Min.   :1.000   Min.   : 18.00   Min.   : 0.00  
##  1st Qu.:1.000   1st Qu.:1.000   1st Qu.: 44.00   1st Qu.:11.00  
##  Median :2.000   Median :2.000   Median : 58.00   Median :13.00  
##  Mean   :1.803   Mean   :1.572   Mean   : 61.74   Mean   :14.23  
##  3rd Qu.:2.000   3rd Qu.:2.000   3rd Qu.: 71.00   3rd Qu.:16.00  
##  Max.   :3.000   Max.   :2.000   Max.   :999.00   Max.   :88.00  
##      inwtm       
##  Min.   :  7.00  
##  1st Qu.: 35.00  
##  Median : 41.00  
##  Mean   : 43.54  
##  3rd Qu.: 50.00  
##  Max.   :160.00</code></pre>
<p>The mean of a categorical variable like party voted for or gender
doesn’t make much sense, but it looks as if all the values are sensible
ones (1 to 3 and 1, 2 respectively). However, the maximum values of
age and years of education look like missing value codes, hence the
other requirements I put in the question.<a href="#fn37" class="footnote-ref" id="fnref37"><sup>37</sup></a></p>
<p>Displaying as the last step of your pipeline also works, but the
advantage of <code>summary</code> is that you get to see whether there are
any unusual values, in this case unusually <em>large</em> values that
are missing value codes.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="5" style="list-style-type: lower-alpha">
<li>Why is my response variable nominal rather than ordinal? How can I tell?
Which R function should I use, therefore, to fit my model?</li>
</ol>
<p>Solution</p>
<p>The response variable is political party voted for. There is no
(obvious) ordering to this (unless you want to try to place the parties
on a left-right spectrum), so this is nominal, and you’ll need
<code>multinom</code> from package <code>nnet</code>.</p>
<p>If I had included the minor parties and you were working on a
left-right spectrum, you would have had to decide where to put the
somewhat libertarian Greens<a href="#fn38" class="footnote-ref" id="fnref38"><sup>38</sup></a>
or the parties that exist only in Northern Ireland.<a href="#fn39" class="footnote-ref" id="fnref39"><sup>39</sup></a></p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="6" style="list-style-type: lower-alpha">
<li><a name="part:full">*</a> Take the political party voted for, and turn it into a
factor, by feeding it into <code>factor</code>.
Fit an appropriate model to predict political party voted
for at the last election (as a factor) from all the other
variables. Gender is really a categorical variable too, but since
there are only two possible values it can be treated as a number.</li>
</ol>
<p>Solution</p>
<p>This, or something like it. <code>multinom</code> lives in package
<code>nnet</code>, which you’ll have to install first if you haven’t already:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="logistic-regression-with-nominal-response.html#cb272-1"></a><span class="kw">library</span>(nnet)</span>
<span id="cb272-2"><a href="logistic-regression-with-nominal-response.html#cb272-2"></a>ess<span class="fl">.1</span> &lt;-<span class="st"> </span><span class="kw">multinom</span>(<span class="kw">factor</span>(prtvtgb) <span class="op">~</span><span class="st"> </span>gndr <span class="op">+</span><span class="st"> </span>agea <span class="op">+</span><span class="st"> </span>eduyrs <span class="op">+</span><span class="st"> </span>inwtm, <span class="dt">data =</span> ess.major)</span></code></pre></div>
<pre><code>## # weights:  18 (10 variable)
## initial  value 1343.602829 
## iter  10 value 1256.123798
## final  value 1247.110080 
## converged</code></pre>
<p>Or create a factor version of your response in the data frame first:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="logistic-regression-with-nominal-response.html#cb274-1"></a>ess.major &lt;-<span class="st"> </span>ess.major <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">party =</span> <span class="kw">factor</span>(prtvtgb))</span></code></pre></div>
<p>and then:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="logistic-regression-with-nominal-response.html#cb275-1"></a>ess<span class="fl">.1</span>a &lt;-<span class="st"> </span><span class="kw">multinom</span>(party <span class="op">~</span><span class="st"> </span>gndr <span class="op">+</span><span class="st"> </span>agea <span class="op">+</span><span class="st"> </span>eduyrs <span class="op">+</span><span class="st"> </span>inwtm, <span class="dt">data =</span> ess.major)</span></code></pre></div>
<pre><code>## # weights:  18 (10 variable)
## initial  value 1343.602829 
## iter  10 value 1256.123798
## final  value 1247.110080 
## converged</code></pre>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="7" style="list-style-type: lower-alpha">
<li>We have a lot of explanatory variables. The standard way to
test whether we need all of them is to take one of them out at a time,
and test which ones we can remove. This is a lot of work. We won’t do
that. Instead,
the R function <code>step</code> does what you want. You feed <code>step</code>
two things: a fitted model object, and the option <code>trace=0</code>
(otherwise you get a lot of output). The final part of the output from
<code>step</code> tells you which explanatory variables you need to keep.
Run <code>step</code> on your fitted model. Which explanatory variables
need to stay in the model here?</li>
</ol>
<p>Solution</p>
<p>I tried to give you lots of hints here:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="logistic-regression-with-nominal-response.html#cb277-1"></a>ess<span class="fl">.2</span>a &lt;-<span class="st"> </span><span class="kw">step</span>(ess<span class="fl">.1</span>, <span class="dt">trace =</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## trying - gndr 
## trying - agea 
## trying - eduyrs 
## trying - inwtm 
## # weights:  15 (8 variable)
## initial  value 1343.602829 
## iter  10 value 1248.343563
## final  value 1248.253638 
## converged
## trying - agea 
## trying - eduyrs 
## trying - inwtm</code></pre>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="logistic-regression-with-nominal-response.html#cb279-1"></a>ess<span class="fl">.2</span>a</span></code></pre></div>
<pre><code>## Call:
## multinom(formula = factor(prtvtgb) ~ agea + eduyrs + inwtm, data = ess.major)
## 
## Coefficients:
##   (Intercept)        agea     eduyrs       inwtm
## 2    1.632266 -0.02153694 -0.0593757 0.009615167
## 3   -1.281031 -0.01869263  0.0886487 0.009337084
## 
## Residual Deviance: 2496.507 
## AIC: 2512.507</code></pre>
<p>If you didn’t save your output in a variable, you’ll get my last bit
automatically.</p>
<p>The end of the output gives us coefficients for (and thus tells us we
need to keep) age, years of education and interview length.</p>
<p>The actual numbers don’t mean much; it’s the indication that the
variable has stayed in the model that makes a
difference.<a href="#fn40" class="footnote-ref" id="fnref40"><sup>40</sup></a></p>
<p>If you’re wondering about the process: first <code>step</code> tries to
take out each explanatory variable, one at a time, from the starting
model (the one that contains all the variables). Then it finds the
best model out of those and fits it. (It doesn’t tell us which model
this is, but evidently it’s the one without gender.) Then it takes
<em>that</em> model and tries to remove its explanatory variables one at
a time (there are only three of them left). Having decided it cannot
remove any of them, it stops, and shows us what’s left.</p>
<p>Leaving out the <code>trace=0</code> shows more output and more detail on
the process, but I figured this was enough (and this way, you don’t
have to wade through all of that output). Try values like 1 or 2 for
<code>trace</code> and see what you get.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="8" style="list-style-type: lower-alpha">
<li>Fit the model indicated by <code>step</code> (in the last part).</li>
</ol>
<p>Solution</p>
<p>Copy and paste, and take out the
variables you don’t need. Or, better, save the output from
<code>step</code> in a variable. This then becomes a fitted model
object and you can look at it any of the ways you can look at a
model fit. I found that gender needed to be removed, but if yours
is different, follow through with whatever your <code>step</code> said
to do.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="logistic-regression-with-nominal-response.html#cb281-1"></a>ess<span class="fl">.2</span> &lt;-<span class="st"> </span><span class="kw">multinom</span>(party <span class="op">~</span><span class="st"> </span>agea <span class="op">+</span><span class="st"> </span>eduyrs <span class="op">+</span><span class="st"> </span>inwtm, <span class="dt">data =</span> ess.major)</span></code></pre></div>
<pre><code>## # weights:  15 (8 variable)
## initial  value 1343.602829 
## iter  10 value 1248.343563
## final  value 1248.253638 
## converged</code></pre>
<p>If you saved the output from <code>step</code>, you’ll already have this and you don’t need to do it again:</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="logistic-regression-with-nominal-response.html#cb283-1"></a><span class="kw">anova</span>(ess<span class="fl">.2</span>, ess<span class="fl">.2</span>a)</span></code></pre></div>
<pre><code>## Likelihood ratio tests of Multinomial Models
## 
## Response: party
## Response: factor(prtvtgb)
##                   Model Resid. df Resid. Dev   Test    Df LR stat. Pr(Chi)
## 1 agea + eduyrs + inwtm      2438   2496.507                              
## 2 agea + eduyrs + inwtm      2438   2496.507 1 vs 2     0        0       1</code></pre>
<p>Same model.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol style="list-style-type: lower-roman">
<li>I didn’t think that interview length could possibly be
relevant to which party a person voted for. Test whether interview
length can be removed from your model of the last part. What do you
conclude? (Note that <code>step</code> and this test may disagree.)</li>
</ol>
<p>Solution</p>
<p>Fit the model without <code>inwtm</code>:</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="logistic-regression-with-nominal-response.html#cb285-1"></a>ess<span class="fl">.3</span> &lt;-<span class="st"> </span><span class="kw">multinom</span>(party <span class="op">~</span><span class="st"> </span>agea <span class="op">+</span><span class="st"> </span>eduyrs, <span class="dt">data =</span> ess.major)</span></code></pre></div>
<pre><code>## # weights:  12 (6 variable)
## initial  value 1343.602829 
## iter  10 value 1250.418281
## final  value 1250.417597 
## converged</code></pre>
<p>and then use <code>anova</code> to compare them:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="logistic-regression-with-nominal-response.html#cb287-1"></a><span class="kw">anova</span>(ess<span class="fl">.3</span>, ess<span class="fl">.2</span>)</span></code></pre></div>
<pre><code>## Likelihood ratio tests of Multinomial Models
## 
## Response: party
##                   Model Resid. df Resid. Dev   Test    Df LR stat.   Pr(Chi)
## 1         agea + eduyrs      2440   2500.835                                
## 2 agea + eduyrs + inwtm      2438   2496.507 1 vs 2     2 4.327917 0.1148695</code></pre>
<p>The P-value, 0.1149, is not small, which says that the smaller model
is good, ie. the one <em>without</em> interview length.</p>
<p>I thought <code>drop1</code> would also work here, but it appears not to:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="logistic-regression-with-nominal-response.html#cb289-1"></a><span class="kw">drop1</span>(ess<span class="fl">.1</span>, <span class="dt">test =</span> <span class="st">&quot;Chisq&quot;</span>)</span></code></pre></div>
<pre><code>## trying - gndr</code></pre>
<pre><code>## Error in if (trace) {: argument is not interpretable as logical</code></pre>
<p>I think that’s a bug in <code>multinom</code>, since normally if
<code>step</code> works, then <code>drop1</code> will work too (normally
<code>step</code> <em>uses</em> <code>drop1</code>).</p>
<p>The reason for the disagreement between <code>step</code> and
<code>anova</code> is that <code>step</code> will tend to
keep marginal explanatory variables, that is, ones that are
“potentially interesting” but whose P-values might not be less than
0.05. There is still no substitute for your judgement in figuring out
what to do! <code>step</code> uses a thing called AIC to decide what to
do, rather than actually doing a test. If you know about
“adjusted R-squared” in choosing explanatory variables for a
regression, it’s the same idea: a variable can be not quite
significant but still make the adjusted R-squared go up (typically
only a little).</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="10" style="list-style-type: lower-alpha">
<li>Use your best model to obtain predictions from some
suitably chosen combinations of values of the explanatory variables
that remain. (If you have quantitative explanatory variables left,
you could use their first and third quartiles as values to predict
from. Running <code>summary</code> on the data frame will get summaries
of all the variables.)</li>
</ol>
<p>Solution</p>
<p>First make our new data frame of values to predict
from. <code>crossing</code> is our friend. You can use
<code>quantile</code> or <code>summary</code> to find the quartiles. I
only had <code>agea</code> and <code>eduyrs</code> left, having decided
that interview time really ought to come out:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="logistic-regression-with-nominal-response.html#cb292-1"></a><span class="kw">summary</span>(ess.major)</span></code></pre></div>
<pre><code>##     prtvtgb           gndr            agea           eduyrs     
##  Min.   :1.000   Min.   :1.000   Min.   :18.00   Min.   : 0.00  
##  1st Qu.:1.000   1st Qu.:1.000   1st Qu.:44.00   1st Qu.:11.00  
##  Median :2.000   Median :2.000   Median :58.00   Median :13.00  
##  Mean   :1.803   Mean   :1.574   Mean   :57.19   Mean   :13.45  
##  3rd Qu.:2.000   3rd Qu.:2.000   3rd Qu.:71.00   3rd Qu.:16.00  
##  Max.   :3.000   Max.   :2.000   Max.   :94.00   Max.   :33.00  
##      inwtm       party  
##  Min.   :  7.0   1:484  
##  1st Qu.: 35.0   2:496  
##  Median : 41.0   3:243  
##  Mean   : 43.7          
##  3rd Qu.: 50.0          
##  Max.   :160.0</code></pre>
<p>Quartiles for age are 44 and 71, and for years of education are 11 and 16:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="logistic-regression-with-nominal-response.html#cb294-1"></a>new &lt;-<span class="st"> </span><span class="kw">crossing</span>(<span class="dt">agea =</span> <span class="kw">c</span>(<span class="dv">44</span>, <span class="dv">71</span>), <span class="dt">eduyrs =</span> <span class="kw">c</span>(<span class="dv">11</span>, <span class="dv">16</span>))</span>
<span id="cb294-2"><a href="logistic-regression-with-nominal-response.html#cb294-2"></a>new</span></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##    agea eduyrs
##   &lt;dbl&gt;  &lt;dbl&gt;
## 1    44     11
## 2    44     16
## 3    71     11
## 4    71     16</code></pre>
<p>Now we feed this into <code>predict</code>. An annoying feature of this
kind of prediction is that <code>type</code> may not be what you
expect. The best model is the one I called <code>ess.3</code>:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="logistic-regression-with-nominal-response.html#cb296-1"></a>pp &lt;-<span class="st"> </span><span class="kw">predict</span>(ess<span class="fl">.3</span>, new, <span class="dt">type =</span> <span class="st">&quot;probs&quot;</span>)</span>
<span id="cb296-2"><a href="logistic-regression-with-nominal-response.html#cb296-2"></a><span class="kw">cbind</span>(new, pp)</span></code></pre></div>
<pre><code>##   agea eduyrs         1         2         3
## 1   44     11 0.3331882 0.5093898 0.1574220
## 2   44     16 0.3471967 0.3955666 0.2572367
## 3   71     11 0.4551429 0.4085120 0.1363451
## 4   71     16 0.4675901 0.3127561 0.2196538</code></pre>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="11" style="list-style-type: lower-alpha">
<li>What is the effect of increasing age? What is the effect of
an increase in years of education?</li>
</ol>
<p>Solution</p>
<p>To assess the effect of age, hold years of education
constant. Thus, compare lines 1 and 3 (or 2 and 4):
increasing age tends to increase the chance that a person will
vote Conservative (party 1), and decrease the chance that a person
will vote Labour (party 2). There doesn’t seem to be much effect
of age on the chance that a person will vote Liberal Democrat.</p>
<p>To assess education, hold age constant, and thus compare rows 1
and 2 (or rows 3 and 4). This time, there isn’t much effect on the
chances of voting Conservative, but as education increases, the
chance of voting Labour goes down, and the chance of voting
Liberal Democrat goes up.</p>
<p>A little history: back 150 or so years ago, Britain had two
political parties, the Tories and the Whigs. The Tories became the
Conservative party (and hence, in Britain and in Canada, the
Conservatives are nicknamed Tories<a href="#fn41" class="footnote-ref" id="fnref41"><sup>41</sup></a>).
The Whigs became Liberals. At
about the same time as
working people got to vote (not women, yet, but working men) the
Labour Party came into existence. The Labour Party has always been
affiliated with working people and trades unions, like the NDP
here. But power has typically alternated between Conservative and
Labour goverments, with the Liberals as a third party. In the
1980s a new party called the Social Democrats came onto the scene,
but on realizing that they couldn’t make much of a dent by
themselves, they merged with the Liberals to form the Liberal
Democrats, which became a slightly stronger third party.</p>
<p>I was curious about what the effect of interview length would
be. Presumably, the effect is small, but I have no idea which way
it would be. To assess this, it’s the same idea over again: create
a new data frame with all combinations of <code>agea</code>,
<code>eduyrs</code> <em>and</em> <code>inwtm</code>. I need the quartiles of
interview time first:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="logistic-regression-with-nominal-response.html#cb298-1"></a><span class="kw">quantile</span>(ess.major<span class="op">$</span>inwtm)</span></code></pre></div>
<pre><code>##   0%  25%  50%  75% 100% 
##    7   35   41   50  160</code></pre>
<p>and then</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="logistic-regression-with-nominal-response.html#cb300-1"></a>ess.new &lt;-<span class="st"> </span><span class="kw">crossing</span>(<span class="dt">agea =</span> <span class="kw">c</span>(<span class="dv">44</span>, <span class="dv">71</span>), <span class="dt">eduyrs =</span> <span class="kw">c</span>(<span class="dv">11</span>, <span class="dv">16</span>), <span class="dt">inwtm =</span> <span class="kw">c</span>(<span class="dv">35</span>, <span class="dv">50</span>))</span>
<span id="cb300-2"><a href="logistic-regression-with-nominal-response.html#cb300-2"></a>ess.new</span></code></pre></div>
<pre><code>## # A tibble: 8 x 3
##    agea eduyrs inwtm
##   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1    44     11    35
## 2    44     11    50
## 3    44     16    35
## 4    44     16    50
## 5    71     11    35
## 6    71     11    50
## 7    71     16    35
## 8    71     16    50</code></pre>
<p>and then predict <em>using the model that contained interview time</em>:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="logistic-regression-with-nominal-response.html#cb302-1"></a>pp &lt;-<span class="st"> </span><span class="kw">predict</span>(ess<span class="fl">.2</span>, ess.new, <span class="dt">type =</span> <span class="st">&quot;probs&quot;</span>)</span>
<span id="cb302-2"><a href="logistic-regression-with-nominal-response.html#cb302-2"></a><span class="kw">cbind</span>(ess.new, pp)</span></code></pre></div>
<pre><code>##   agea eduyrs inwtm         1         2         3
## 1   44     11    35 0.3455998 0.4993563 0.1550439
## 2   44     11    50 0.3139582 0.5240179 0.1620238
## 3   44     16    35 0.3606728 0.3872735 0.2520536
## 4   44     16    50 0.3284883 0.4074380 0.2640737
## 5   71     11    35 0.4810901 0.3886175 0.1302924
## 6   71     11    50 0.4455030 0.4157036 0.1387934
## 7   71     16    35 0.4945171 0.2968551 0.2086277
## 8   71     16    50 0.4589823 0.3182705 0.2227472</code></pre>
<p>The effects of age and education are as they were before. A longer
interview time is associated with a slightly decreased chance of
voting Conservative and a slightly increased chance of voting
Labour. Compare, for example, lines 1 and 2. But, as we
suspected, the effect is small and not really worth worrying about.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="alligator-food-1" class="section level2" number="28.9">
<h2><span class="header-section-number">28.9</span> Alligator food</h2>
<p>What do alligators most like to eat? 219 alligators were captured
in four Florida lakes. Each alligator’s stomach contents were
observed, and the food that the alligator had eaten was classified
into one of five categories: fish, invertebrates (such as snails or
insects), reptiles (such as turtles), birds, and “other” (such as
amphibians, plants or rocks). The researcher noted for each alligator
what that alligator had most of in its stomach, as well as the gender
of each alligator and whether it was “large” or “small” (greater
or less than 2.3 metres in length). The data can be found in
<a href="http://ritsokiguess.site/datafiles/alligator.txt">link</a>. The
numbers in the data set (apart from the first column) are all
frequencies. (You can ignore that first column “profile”.)</p>
<p>Our aim is to predict food type from the other variables.</p>
<ol style="list-style-type: lower-alpha">
<li>Read in the data and display the first few lines. Describe
how the data are not “tidy”.</li>
</ol>
<p>Solution</p>
<p>Separated by exactly one space:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="logistic-regression-with-nominal-response.html#cb304-1"></a>my_url &lt;-<span class="st"> &quot;http://ritsokiguess.site/datafiles/alligator.txt&quot;</span></span>
<span id="cb304-2"><a href="logistic-regression-with-nominal-response.html#cb304-2"></a>gators.orig &lt;-<span class="st"> </span><span class="kw">read_delim</span>(my_url, <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## 
## ── Column specification ────────────────────────────────────────────────────────
## cols(
##   profile = col_double(),
##   Gender = col_character(),
##   Size = col_character(),
##   Lake = col_character(),
##   Fish = col_double(),
##   Invertebrate = col_double(),
##   Reptile = col_double(),
##   Bird = col_double(),
##   Other = col_double()
## )</code></pre>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="logistic-regression-with-nominal-response.html#cb306-1"></a>gators.orig</span></code></pre></div>
<pre><code>## # A tibble: 16 x 9
##    profile Gender Size  Lake      Fish Invertebrate Reptile  Bird Other
##      &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1       1 f      &lt;2.3  george       3            9       1     0     1
##  2       2 m      &lt;2.3  george      13           10       0     2     2
##  3       3 f      &gt;2.3  george       8            1       0     0     1
##  4       4 m      &gt;2.3  george       9            0       0     1     2
##  5       5 f      &lt;2.3  hancock     16            3       2     2     3
##  6       6 m      &lt;2.3  hancock      7            1       0     0     5
##  7       7 f      &gt;2.3  hancock      3            0       1     2     3
##  8       8 m      &gt;2.3  hancock      4            0       0     1     2
##  9       9 f      &lt;2.3  oklawaha     3            9       1     0     2
## 10      10 m      &lt;2.3  oklawaha     2            2       0     0     1
## 11      11 f      &gt;2.3  oklawaha     0            1       0     1     0
## 12      12 m      &gt;2.3  oklawaha    13            7       6     0     0
## 13      13 f      &lt;2.3  trafford     2            4       1     1     4
## 14      14 m      &lt;2.3  trafford     3            7       1     0     1
## 15      15 f      &gt;2.3  trafford     0            1       0     0     0
## 16      16 m      &gt;2.3  trafford     8            6       6     3     5</code></pre>
<p>The last five columns are all frequencies. Or, one of the variables
(food type) is spread over five columns instead of being contained in
one. Either is good.</p>
<p>My choice of “temporary” name reflects that I’m going to obtain a
“tidy” data frame called <code>gators</code> in a moment.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Use <code>pivot_longer</code> to arrange the data
suitably for analysis (which will be using
<code>multinom</code>). Demonstrate (by looking at the first few rows
of your new data frame) that you now have something tidy.</li>
</ol>
<p>Solution</p>
<p>I’m creating my “official” data frame here:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="logistic-regression-with-nominal-response.html#cb308-1"></a>gators.orig <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb308-2"><a href="logistic-regression-with-nominal-response.html#cb308-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(Fish<span class="op">:</span>Other, <span class="dt">names_to =</span> <span class="st">&quot;Food.type&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Frequency&quot;</span>) -&gt;<span class="st"> </span>gators</span>
<span id="cb308-3"><a href="logistic-regression-with-nominal-response.html#cb308-3"></a>gators</span></code></pre></div>
<pre><code>## # A tibble: 80 x 6
##    profile Gender Size  Lake   Food.type    Frequency
##      &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;            &lt;dbl&gt;
##  1       1 f      &lt;2.3  george Fish                 3
##  2       1 f      &lt;2.3  george Invertebrate         9
##  3       1 f      &lt;2.3  george Reptile              1
##  4       1 f      &lt;2.3  george Bird                 0
##  5       1 f      &lt;2.3  george Other                1
##  6       2 m      &lt;2.3  george Fish                13
##  7       2 m      &lt;2.3  george Invertebrate        10
##  8       2 m      &lt;2.3  george Reptile              0
##  9       2 m      &lt;2.3  george Bird                 2
## 10       2 m      &lt;2.3  george Other                2
## # … with 70 more rows</code></pre>
<p>I gave my
column names Capital Letters to make them consistent with the others
(and in an attempt to stop infesting my brain with annoying
variable-name errors when I fit models later).</p>
<p>Looking at the first few lines reveals that I now have a column of
food types and one column of frequencies, both of which are what I
wanted. I can check that I have all the different food types by
finding the distinct ones:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="logistic-regression-with-nominal-response.html#cb310-1"></a>gators <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Food.type)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 1
##   Food.type   
##   &lt;chr&gt;       
## 1 Fish        
## 2 Invertebrate
## 3 Reptile     
## 4 Bird        
## 5 Other</code></pre>
<p>(Think about why <code>count</code> would be confusing here.)</p>
<p>Note that <code>Food.type</code> is text (<code>chr</code>) rather than being a
factor. I’ll hold my breath and see what happens when I fit a model
where it is supposed to be a factor.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>What is different about this problem, compared to
Question <a href="#q:abortion">here</a>, that would make
<code>multinom</code> the right tool to use?</li>
</ol>
<p>Solution</p>
<p>Look at the response variable <code>Food.type</code> (or whatever
you called it): this has multiple categories, but they are
<em>not ordered</em> in any logical way. Thus, in short, a nominal
response.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="4" style="list-style-type: lower-alpha">
<li>Fit a suitable multinomial model predicting food type from
gender, size and lake. Does each row represent one alligator or more
than one? If more than one, account for this in your modelling.</li>
</ol>
<p>Solution</p>
<p>Each row of the tidy <code>gators</code> represents as many
alligators as are in the <code>Frequency</code> column. That is, if
you look at female small alligators in Lake George that ate
mainly fish, there are three of those.<a href="#fn42" class="footnote-ref" id="fnref42"><sup>42</sup></a>
This to remind you to include the <code>weights</code> piece,
otherwise <code>multinom</code> will assume that you have <em>one</em>
observation per line and not as many as the number in
<code>Frequency</code>.</p>
<p><em>That</em> is the
reason that <code>count</code> earlier would have been confusing:
it would have told you how many <em>rows</em> contained each
food type, rather than how many <em>alligators</em>, and these
would have been different:</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="logistic-regression-with-nominal-response.html#cb312-1"></a>gators <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(Food.type)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   Food.type        n
##   &lt;chr&gt;        &lt;int&gt;
## 1 Bird            16
## 2 Fish            16
## 3 Invertebrate    16
## 4 Other           16
## 5 Reptile         16</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="logistic-regression-with-nominal-response.html#cb314-1"></a>gators <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(Food.type, <span class="dt">wt =</span> Frequency)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   Food.type        n
##   &lt;chr&gt;        &lt;dbl&gt;
## 1 Bird            13
## 2 Fish            94
## 3 Invertebrate    61
## 4 Other           32
## 5 Reptile         19</code></pre>
<p>Each food type appears on 16 rows, but is the favoured diet of very
different numbers of <em>alligators</em>. Note the use of <code>wt=</code>
to specify a frequency variable.<a href="#fn43" class="footnote-ref" id="fnref43"><sup>43</sup></a></p>
<p>You ought to understand <em>why</em> those are different.</p>
<p>All right, back to modelling:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="logistic-regression-with-nominal-response.html#cb316-1"></a><span class="kw">library</span>(nnet)</span>
<span id="cb316-2"><a href="logistic-regression-with-nominal-response.html#cb316-2"></a>gators<span class="fl">.1</span> &lt;-<span class="st"> </span><span class="kw">multinom</span>(Food.type <span class="op">~</span><span class="st"> </span>Gender <span class="op">+</span><span class="st"> </span>Size <span class="op">+</span><span class="st"> </span>Lake,</span>
<span id="cb316-3"><a href="logistic-regression-with-nominal-response.html#cb316-3"></a>  <span class="dt">weights =</span> Frequency, <span class="dt">data =</span> gators</span>
<span id="cb316-4"><a href="logistic-regression-with-nominal-response.html#cb316-4"></a>)</span></code></pre></div>
<pre><code>## # weights:  35 (24 variable)
## initial  value 352.466903 
## iter  10 value 270.228588
## iter  20 value 268.944257
## final  value 268.932741 
## converged</code></pre>
<p>This worked, even though <code>Food.type</code> was actually text. I guess
it got converted to a factor. The ordering of the levels doesn’t
matter here anyway, since this is not an ordinal model.</p>
<p>No need to look at it, since the output is kind of confusing anyway:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="logistic-regression-with-nominal-response.html#cb318-1"></a><span class="kw">summary</span>(gators<span class="fl">.1</span>)</span></code></pre></div>
<pre><code>## Call:
## multinom(formula = Food.type ~ Gender + Size + Lake, data = gators, 
##     weights = Frequency)
## 
## Coefficients:
##              (Intercept)     Genderm   Size&gt;2.3 Lakehancock Lakeoklawaha
## Fish           2.4322304  0.60674971 -0.7308535  -0.5751295    0.5513785
## Invertebrate   2.6012531  0.14378459 -2.0671545  -2.3557377    1.4645820
## Other          1.0014505  0.35423803 -1.0214847   0.1914537    0.5775317
## Reptile       -0.9829064 -0.02053375 -0.1741207   0.5534169    3.0807416
##              Laketrafford
## Fish          -1.23681053
## Invertebrate  -0.08096493
## Other          0.32097943
## Reptile        1.82333205
## 
## Std. Errors:
##              (Intercept)   Genderm  Size&gt;2.3 Lakehancock Lakeoklawaha
## Fish           0.7706940 0.6888904 0.6523273   0.7952147     1.210229
## Invertebrate   0.7917210 0.7292510 0.7084028   0.9463640     1.232835
## Other          0.8747773 0.7623738 0.7250455   0.9072182     1.374545
## Reptile        1.2827234 0.9088217 0.8555051   1.3797755     1.591542
##              Laketrafford
## Fish            0.8661187
## Invertebrate    0.8814625
## Other           0.9589807
## Reptile         1.3388017
## 
## Residual Deviance: 537.8655 
## AIC: 585.8655</code></pre>
<p>You get one coefficient for each variable (along the top) and for each
response group (down the side), using the first group as a baseline
everywhere. These numbers are hard to interpret; doing predictions is
much easier.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="5" style="list-style-type: lower-alpha">
<li>Do a test to see whether <code>Gender</code> should stay in
the model. (This will entail fitting another model.) What do you conclude?</li>
</ol>
<p>Solution</p>
<p>The other model to fit is the one <em>without</em> the variable
you’re testing:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="logistic-regression-with-nominal-response.html#cb320-1"></a>gators<span class="fl">.2</span> &lt;-<span class="st"> </span><span class="kw">update</span>(gators<span class="fl">.1</span>, . <span class="op">~</span><span class="st"> </span>. <span class="op">-</span><span class="st"> </span>Gender)</span></code></pre></div>
<pre><code>## # weights:  30 (20 variable)
## initial  value 352.466903 
## iter  10 value 272.246275
## iter  20 value 270.046891
## final  value 270.040139 
## converged</code></pre>
<p>I did <code>update</code> here to show you that it works, but of course
there’s no problem in just writing out the whole model again and
taking out <code>Gender</code>, preferably by copying and pasting:</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="logistic-regression-with-nominal-response.html#cb322-1"></a>gators<span class="fl">.2</span>x &lt;-<span class="st"> </span><span class="kw">multinom</span>(Food.type <span class="op">~</span><span class="st"> </span>Size <span class="op">+</span><span class="st"> </span>Lake,</span>
<span id="cb322-2"><a href="logistic-regression-with-nominal-response.html#cb322-2"></a>  <span class="dt">weights =</span> Frequency, <span class="dt">data =</span> gators</span>
<span id="cb322-3"><a href="logistic-regression-with-nominal-response.html#cb322-3"></a>)</span></code></pre></div>
<pre><code>## # weights:  30 (20 variable)
## initial  value 352.466903 
## iter  10 value 272.246275
## iter  20 value 270.046891
## final  value 270.040139 
## converged</code></pre>
<p>and then you compare the models with and without <code>Gender</code> using <code>anova</code>:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="logistic-regression-with-nominal-response.html#cb324-1"></a><span class="kw">anova</span>(gators<span class="fl">.2</span>, gators<span class="fl">.1</span>)</span></code></pre></div>
<pre><code>## Likelihood ratio tests of Multinomial Models
## 
## Response: Food.type
##                  Model Resid. df Resid. Dev   Test    Df LR stat.   Pr(Chi)
## 1          Size + Lake       300   540.0803                                
## 2 Gender + Size + Lake       296   537.8655 1 vs 2     4 2.214796 0.6963214</code></pre>
<p>The P-value is not small, so the two models fit equally well, and
therefore we should go with the smaller, simpler one: that is, the one
without <code>Gender</code>.</p>
<p>Sometimes <code>drop1</code> works here too (and sometimes it doesn’t, for
reasons I haven’t figured out):</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="logistic-regression-with-nominal-response.html#cb326-1"></a><span class="kw">drop1</span>(gators<span class="fl">.1</span>, <span class="dt">test =</span> <span class="st">&quot;Chisq&quot;</span>)</span></code></pre></div>
<pre><code>## trying - Gender</code></pre>
<pre><code>## Error in if (trace) {: argument is not interpretable as logical</code></pre>
<p>I don’t even know what this error message means, never mind what to do
about it.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="6" style="list-style-type: lower-alpha">
<li>Predict the probability that an alligator
prefers each food type, given its size, gender (if necessary) and
the lake it was found
in, using the more appropriate of the two models that you have
fitted so far. This means (i) obtaining all the sizes and lake
names, (ii)
making a data frame for prediction, and (iii) obtaining and
displaying the predicted probabilities.</li>
</ol>
<p>Solution</p>
<p>To get the different categories, use <code>distinct</code> and <code>pull</code>:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="logistic-regression-with-nominal-response.html#cb329-1"></a>Lakes &lt;-<span class="st"> </span>gators <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Lake) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(Lake)</span>
<span id="cb329-2"><a href="logistic-regression-with-nominal-response.html#cb329-2"></a>Lakes</span></code></pre></div>
<pre><code>## [1] &quot;george&quot;   &quot;hancock&quot;  &quot;oklawaha&quot; &quot;trafford&quot;</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="logistic-regression-with-nominal-response.html#cb331-1"></a>Sizes &lt;-<span class="st"> </span>gators <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Size) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(Size)</span>
<span id="cb331-2"><a href="logistic-regression-with-nominal-response.html#cb331-2"></a>Sizes</span></code></pre></div>
<pre><code>## [1] &quot;&lt;2.3&quot; &quot;&gt;2.3&quot;</code></pre>
<p>I didn’t need to think about <code>Genders</code> because that’s not in
the better model. See below for what happens if you include it
anyway.</p>
<p>I have persisted with the Capital Letters, for consistency.</p>
<p>Next, a data frame for predicting from, using <code>crossing</code>,
and called, as per my tradition, <code>new</code>:</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="logistic-regression-with-nominal-response.html#cb333-1"></a>new &lt;-<span class="st"> </span><span class="kw">crossing</span>(<span class="dt">Lake =</span> Lakes, <span class="dt">Size =</span> Sizes)</span>
<span id="cb333-2"><a href="logistic-regression-with-nominal-response.html#cb333-2"></a>new</span></code></pre></div>
<pre><code>## # A tibble: 8 x 2
##   Lake     Size 
##   &lt;chr&gt;    &lt;chr&gt;
## 1 george   &lt;2.3 
## 2 george   &gt;2.3 
## 3 hancock  &lt;2.3 
## 4 hancock  &gt;2.3 
## 5 oklawaha &lt;2.3 
## 6 oklawaha &gt;2.3 
## 7 trafford &lt;2.3 
## 8 trafford &gt;2.3</code></pre>
<p>and then, obtain the predictions and glue them onto the data frame of
values for which they are predictions. Don’t forget to use the second
model, the one without <code>Gender</code>. If you do forget, you’ll get
an error anyway, because your data frame of values to predict from
doesn’t have any <code>Gender</code> in it:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="logistic-regression-with-nominal-response.html#cb335-1"></a>pp &lt;-<span class="st"> </span><span class="kw">predict</span>(gators<span class="fl">.2</span>, new, <span class="dt">type =</span> <span class="st">&quot;p&quot;</span>)</span>
<span id="cb335-2"><a href="logistic-regression-with-nominal-response.html#cb335-2"></a>preds1 &lt;-<span class="st"> </span><span class="kw">cbind</span>(new, pp)</span>
<span id="cb335-3"><a href="logistic-regression-with-nominal-response.html#cb335-3"></a>preds1</span></code></pre></div>
<pre><code>##       Lake Size        Bird      Fish Invertebrate      Other    Reptile
## 1   george &lt;2.3 0.029671502 0.4521032   0.41285699 0.09380190 0.01156641
## 2   george &gt;2.3 0.081071082 0.6574394   0.13967877 0.09791193 0.02389880
## 3  hancock &lt;2.3 0.070400215 0.5353040   0.09309885 0.25374163 0.04745531
## 4  hancock &gt;2.3 0.140898571 0.5701968   0.02307179 0.19400899 0.07182382
## 5 oklawaha &lt;2.3 0.008818267 0.2581872   0.60189518 0.05387241 0.07722691
## 6 oklawaha &gt;2.3 0.029419560 0.4584368   0.24864408 0.06866206 0.19483754
## 7 trafford &lt;2.3 0.035892547 0.1842997   0.51683770 0.17420330 0.08876673
## 8 trafford &gt;2.3 0.108222209 0.2957526   0.19296148 0.20066241 0.20240133</code></pre>
<p>Success. You won’t get this right the first time. I certainly didn’t.
Anyway, these are the correct predictions that I discuss later.</p>
<p>If you thought that the better model was the one with <code>Gender</code>
in it, or you otherwise forgot that you didn’t need <code>Gender</code>
then you needed to do something like this as well:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="logistic-regression-with-nominal-response.html#cb337-1"></a>Genders &lt;-<span class="st"> </span>gators <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(Gender) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(Gender)</span>
<span id="cb337-2"><a href="logistic-regression-with-nominal-response.html#cb337-2"></a>new &lt;-<span class="st"> </span><span class="kw">crossing</span>(<span class="dt">Lake =</span> Lakes, <span class="dt">Size =</span> Sizes, <span class="dt">Gender =</span> Genders)</span>
<span id="cb337-3"><a href="logistic-regression-with-nominal-response.html#cb337-3"></a>new</span></code></pre></div>
<pre><code>## # A tibble: 16 x 3
##    Lake     Size  Gender
##    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; 
##  1 george   &lt;2.3  f     
##  2 george   &lt;2.3  m     
##  3 george   &gt;2.3  f     
##  4 george   &gt;2.3  m     
##  5 hancock  &lt;2.3  f     
##  6 hancock  &lt;2.3  m     
##  7 hancock  &gt;2.3  f     
##  8 hancock  &gt;2.3  m     
##  9 oklawaha &lt;2.3  f     
## 10 oklawaha &lt;2.3  m     
## 11 oklawaha &gt;2.3  f     
## 12 oklawaha &gt;2.3  m     
## 13 trafford &lt;2.3  f     
## 14 trafford &lt;2.3  m     
## 15 trafford &gt;2.3  f     
## 16 trafford &gt;2.3  m</code></pre>
<p>If you predict this in the model <em>without</em> <code>Gender</code>, you’ll get
the following:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="logistic-regression-with-nominal-response.html#cb339-1"></a>pp &lt;-<span class="st"> </span><span class="kw">predict</span>(gators<span class="fl">.2</span>, new, <span class="dt">type =</span> <span class="st">&quot;p&quot;</span>)</span>
<span id="cb339-2"><a href="logistic-regression-with-nominal-response.html#cb339-2"></a><span class="kw">cbind</span>(new, pp)</span></code></pre></div>
<pre><code>##        Lake Size Gender        Bird      Fish Invertebrate      Other
## 1    george &lt;2.3      f 0.029671502 0.4521032   0.41285699 0.09380190
## 2    george &lt;2.3      m 0.029671502 0.4521032   0.41285699 0.09380190
## 3    george &gt;2.3      f 0.081071082 0.6574394   0.13967877 0.09791193
## 4    george &gt;2.3      m 0.081071082 0.6574394   0.13967877 0.09791193
## 5   hancock &lt;2.3      f 0.070400215 0.5353040   0.09309885 0.25374163
## 6   hancock &lt;2.3      m 0.070400215 0.5353040   0.09309885 0.25374163
## 7   hancock &gt;2.3      f 0.140898571 0.5701968   0.02307179 0.19400899
## 8   hancock &gt;2.3      m 0.140898571 0.5701968   0.02307179 0.19400899
## 9  oklawaha &lt;2.3      f 0.008818267 0.2581872   0.60189518 0.05387241
## 10 oklawaha &lt;2.3      m 0.008818267 0.2581872   0.60189518 0.05387241
## 11 oklawaha &gt;2.3      f 0.029419560 0.4584368   0.24864408 0.06866206
## 12 oklawaha &gt;2.3      m 0.029419560 0.4584368   0.24864408 0.06866206
## 13 trafford &lt;2.3      f 0.035892547 0.1842997   0.51683770 0.17420330
## 14 trafford &lt;2.3      m 0.035892547 0.1842997   0.51683770 0.17420330
## 15 trafford &gt;2.3      f 0.108222209 0.2957526   0.19296148 0.20066241
## 16 trafford &gt;2.3      m 0.108222209 0.2957526   0.19296148 0.20066241
##       Reptile
## 1  0.01156641
## 2  0.01156641
## 3  0.02389880
## 4  0.02389880
## 5  0.04745531
## 6  0.04745531
## 7  0.07182382
## 8  0.07182382
## 9  0.07722691
## 10 0.07722691
## 11 0.19483754
## 12 0.19483754
## 13 0.08876673
## 14 0.08876673
## 15 0.20240133
## 16 0.20240133</code></pre>
<p>Here, the predictions for each gender are <em>exactly the same</em>,
because not having <code>Gender</code> in the model means that we take its
effect to be <em>exactly zero</em>.</p>
<p>Alternatively, if you really thought the model with <code>Gender</code> was the
better one, then you’d do this:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="logistic-regression-with-nominal-response.html#cb341-1"></a>pp &lt;-<span class="st"> </span><span class="kw">predict</span>(gators<span class="fl">.1</span>, new, <span class="dt">type =</span> <span class="st">&quot;p&quot;</span>)</span>
<span id="cb341-2"><a href="logistic-regression-with-nominal-response.html#cb341-2"></a><span class="kw">cbind</span>(new, pp)</span></code></pre></div>
<pre><code>##        Lake Size Gender        Bird      Fish Invertebrate      Other
## 1    george &lt;2.3      f 0.034528820 0.3930846   0.46546988 0.09399531
## 2    george &lt;2.3      m 0.023983587 0.5008716   0.37330933 0.09304268
## 3    george &gt;2.3      f 0.105463159 0.5780952   0.17991064 0.10337131
## 4    george &gt;2.3      m 0.067888065 0.6826531   0.13371938 0.09482794
## 5   hancock &lt;2.3      f 0.079170901 0.5071007   0.10120258 0.26099808
## 6   hancock &lt;2.3      m 0.051120681 0.6006664   0.07545143 0.24016625
## 7   hancock &gt;2.3      f 0.167234031 0.5157600   0.02705184 0.19850489
## 8   hancock &gt;2.3      m 0.110233536 0.6236556   0.02058879 0.18646783
## 9  oklawaha &lt;2.3      f 0.010861171 0.2146058   0.63335376 0.05267686
## 10 oklawaha &lt;2.3      m 0.008370118 0.3033923   0.56356778 0.05785201
## 11 oklawaha &gt;2.3      f 0.037755986 0.3592072   0.27861325 0.06593316
## 12 oklawaha &gt;2.3      m 0.027647882 0.4825354   0.23557146 0.06880557
## 13 trafford &lt;2.3      f 0.043846177 0.1449092   0.54510349 0.16453404
## 14 trafford &lt;2.3      m 0.034440739 0.2088069   0.49438416 0.18417900
## 15 trafford &gt;2.3      f 0.133999340 0.2132364   0.21081238 0.18105124
## 16 trafford &gt;2.3      m 0.104507582 0.3050805   0.18983929 0.20122886
##        Reptile
## 1  0.012921439
## 2  0.008792768
## 3  0.033159675
## 4  0.020911502
## 5  0.051527690
## 6  0.032595228
## 7  0.091449234
## 8  0.059054291
## 9  0.088502364
## 10 0.066817794
## 11 0.258490381
## 12 0.185439712
## 13 0.101607074
## 14 0.078189237
## 15 0.260900674
## 16 0.199343761</code></pre>
<p>and this time there <em>is</em> an effect of gender, but it is
smallish, as befits an effect that is not significant.<a href="#fn44" class="footnote-ref" id="fnref44"><sup>44</sup></a></p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="7" style="list-style-type: lower-alpha">
<li>What do you think is the most important way in which the
lakes differ? (Hint: look at where the biggest predicted
probabilities are.)</li>
</ol>
<p>Solution</p>
<p>Here are the predictions again:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="logistic-regression-with-nominal-response.html#cb343-1"></a>preds1</span></code></pre></div>
<pre><code>##       Lake Size        Bird      Fish Invertebrate      Other    Reptile
## 1   george &lt;2.3 0.029671502 0.4521032   0.41285699 0.09380190 0.01156641
## 2   george &gt;2.3 0.081071082 0.6574394   0.13967877 0.09791193 0.02389880
## 3  hancock &lt;2.3 0.070400215 0.5353040   0.09309885 0.25374163 0.04745531
## 4  hancock &gt;2.3 0.140898571 0.5701968   0.02307179 0.19400899 0.07182382
## 5 oklawaha &lt;2.3 0.008818267 0.2581872   0.60189518 0.05387241 0.07722691
## 6 oklawaha &gt;2.3 0.029419560 0.4584368   0.24864408 0.06866206 0.19483754
## 7 trafford &lt;2.3 0.035892547 0.1842997   0.51683770 0.17420330 0.08876673
## 8 trafford &gt;2.3 0.108222209 0.2957526   0.19296148 0.20066241 0.20240133</code></pre>
<p>Following my own hint: the preferred diet in George and Hancock lakes
is fish, but the preferred diet in Oklawaha and Trafford lakes is (at
least sometimes) invertebrates. That is to say, the preferred diet in
those last two lakes is less likely to be invertebrates than it is in
the first two (comparing for alligators of the same size). This is
true for both large and small alligators, as it should be, since there
is no interaction in the model.
That will do, though you can also note that reptiles are more
commonly found in the last two lakes, and birds sometimes appear
in the diet in Hancock and Trafford but rarely in the other two
lakes.</p>
<p>Another way to think about this is to hold size constant and
compare lakes (and then check that it applies to the other size
too). In this case, you’d find the biggest predictions among the
first four rows, and then check that the pattern persists in the
second four rows. (It does.)</p>
<p>I think looking at predicted probabilities like this is the
easiest way to see what the model is telling you. I also think
that having a consistent recipe for doing predictions makes the
process require a good deal less thought: get the values you
want to predict for and store them in vectors with plural names;
create a data frame for prediction using <code>crossing</code>,
where the things inside are all “singular=plural”; run
<code>predict</code> with model, new data and (if needed) type of
value to predict, glue the predictions onto the new data.</p>
<p>If you somehow mess up the creation of your new data frame (this
typically happens by forgetting a variable that you should have
included, or giving it the wrong name), <code>predict</code> will
<em>silently</em> use the <em>original data</em> to predict
from. Your only warning that this has happened is the size of
the output; it should have as many rows as <code>new</code> did
above, and the original data will typically have many
more. (This happened to me just now. I recognized what the
problem was, and how I would be able to fix it.)</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="8" style="list-style-type: lower-alpha">
<li>How would you describe the major difference between the
diets of the small and large alligators?</li>
</ol>
<p>Solution</p>
<p>Same idea: hold lake constant, and compare small and large, then
check that your conclusion holds for the other lakes as it should.
For example, in George Lake, the large alligators are more
likely to eat fish, and less likely to eat invertebrates,
compared to the small ones. The other food types are not that
much different, though you might also note that birds appear
more in the diets of large alligators than small ones.
Does that hold in the other lakes? I think so, though there is
less difference for fish in Hancock lake than the others (where
invertebrates are rare for both sizes). Birds don’t commonly
appear in any alligator’s diets, but where they do, they are
commoner for large alligators than small ones.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="crimes-in-san-francisco-1" class="section level2" number="28.10">
<h2><span class="header-section-number">28.10</span> Crimes in San Francisco</h2>
<p>The data in
<a href="http://ritsokiguess.site/datafiles/sfcrime1.csv">link</a> is a subset
of a huge
dataset of crimes committed in San Francisco between 2003 and
2015. The variables are:</p>
<ul>
<li><p><code>Dates</code>: the date and time of the crime</p></li>
<li><p><code>Category</code>: the category of crime, eg. “larceny” or
“vandalism” (response).</p></li>
<li><p><code>Descript</code>: detailed description of crime.</p></li>
<li><p><code>DayOfWeek</code>: the day of the week of the crime.</p></li>
<li><p><code>PdDistrict</code>: the name of the San Francisco Police
Department district in which the crime took place.</p></li>
<li><p><code>Resolution</code>: how the crime was resolved</p></li>
<li><p><code>Address</code>: approximate street address of crime</p></li>
<li><p><code>X</code>: longitude</p></li>
<li><p><code>Y</code>: latitude</p></li>
</ul>
<p>Our aim is to see whether the category of crime depends on the day of
the week and the district in which it occurred. However, there are a
lot of crime categories, so we will focus on the top four
“interesting” ones, which are the ones included in this data file.</p>
<p>Some of the model-fitting takes a while (you’ll see why below). If
you’re using R Markdown, you can wait for the models to fit each time
you re-run your document, or insert <code>cache=T</code> in the top line
of your code chunk (the one with <code>r</code> in curly brackets in it,
above the actual code). Put a comma and the <code>cache=T</code> inside
the curly brackets. What that does is to re-run that code chunk only
if it changes; if it hasn’t changed it will use the saved results from
last time it was run. That can save you a lot of waiting around.</p>
<ol style="list-style-type: lower-alpha">
<li>Read in the data and display the dataset (or, at least,
part of it).</li>
</ol>
<p>Solution</p>
<p>The usual:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="logistic-regression-with-nominal-response.html#cb345-1"></a>my_url &lt;-<span class="st"> &quot;http://utsc.utoronto.ca/~butler/d29/sfcrime1.csv&quot;</span></span>
<span id="cb345-2"><a href="logistic-regression-with-nominal-response.html#cb345-2"></a>sfcrime &lt;-<span class="st"> </span><span class="kw">read_csv</span>(my_url)</span></code></pre></div>
<pre><code>## 
## ── Column specification ───────────────────────────────────────────────────────────────
## cols(
##   Category = col_character(),
##   DayOfWeek = col_character(),
##   PdDistrict = col_character()
## )</code></pre>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="logistic-regression-with-nominal-response.html#cb347-1"></a>sfcrime</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Category"],"name":[1],"type":["chr"],"align":["left"]},{"label":["DayOfWeek"],"name":[2],"type":["chr"],"align":["left"]},{"label":["PdDistrict"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"ASSAULT","2":"Wednesday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TENDERLOIN"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TARAVAL"},{"1":"ASSAULT","2":"Wednesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"BAYVIEW"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"DRUG/NARCOTIC","2":"Wednesday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Wednesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"RICHMOND"},{"1":"ASSAULT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"DRUG/NARCOTIC","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"RICHMOND"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"ASSAULT","2":"Wednesday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"ASSAULT","2":"Wednesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"DRUG/NARCOTIC","2":"Wednesday","3":"PARK"},{"1":"DRUG/NARCOTIC","2":"Wednesday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"RICHMOND"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TENDERLOIN"},{"1":"ASSAULT","2":"Wednesday","3":"INGLESIDE"},{"1":"ASSAULT","2":"Wednesday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"INGLESIDE"},{"1":"ASSAULT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TARAVAL"},{"1":"DRUG/NARCOTIC","2":"Wednesday","3":"MISSION"},{"1":"DRUG/NARCOTIC","2":"Wednesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"ASSAULT","2":"Wednesday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Wednesday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Wednesday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Wednesday","3":"CENTRAL"},{"1":"ASSAULT","2":"Wednesday","3":"MISSION"},{"1":"DRUG/NARCOTIC","2":"Wednesday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"ASSAULT","2":"Wednesday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"INGLESIDE"},{"1":"DRUG/NARCOTIC","2":"Wednesday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"DRUG/NARCOTIC","2":"Wednesday","3":"TENDERLOIN"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"PARK"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"MISSION"},{"1":"ASSAULT","2":"Wednesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Wednesday","3":"MISSION"},{"1":"ASSAULT","2":"Wednesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"RICHMOND"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"MISSION"},{"1":"ASSAULT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TENDERLOIN"},{"1":"DRUG/NARCOTIC","2":"Wednesday","3":"NORTHERN"},{"1":"ASSAULT","2":"Wednesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Wednesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Wednesday","3":"CENTRAL"},{"1":"ASSAULT","2":"Wednesday","3":"RICHMOND"},{"1":"ASSAULT","2":"Wednesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Tuesday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"ASSAULT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"INGLESIDE"},{"1":"DRUG/NARCOTIC","2":"Tuesday","3":"RICHMOND"},{"1":"DRUG/NARCOTIC","2":"Tuesday","3":"RICHMOND"},{"1":"DRUG/NARCOTIC","2":"Tuesday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"NORTHERN"},{"1":"ASSAULT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"ASSAULT","2":"Tuesday","3":"CENTRAL"},{"1":"ASSAULT","2":"Tuesday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"ASSAULT","2":"Tuesday","3":"INGLESIDE"},{"1":"DRUG/NARCOTIC","2":"Tuesday","3":"TENDERLOIN"},{"1":"DRUG/NARCOTIC","2":"Tuesday","3":"TENDERLOIN"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"DRUG/NARCOTIC","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Tuesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"DRUG/NARCOTIC","2":"Tuesday","3":"TENDERLOIN"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"NORTHERN"},{"1":"DRUG/NARCOTIC","2":"Tuesday","3":"NORTHERN"},{"1":"ASSAULT","2":"Tuesday","3":"INGLESIDE"},{"1":"ASSAULT","2":"Tuesday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Tuesday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Tuesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"ASSAULT","2":"Tuesday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Tuesday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Tuesday","3":"MISSION"},{"1":"DRUG/NARCOTIC","2":"Tuesday","3":"MISSION"},{"1":"ASSAULT","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Tuesday","3":"RICHMOND"},{"1":"ASSAULT","2":"Tuesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"NORTHERN"},{"1":"ASSAULT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"MISSION"},{"1":"ASSAULT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"ASSAULT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"ASSAULT","2":"Tuesday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"ASSAULT","2":"Tuesday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"INGLESIDE"},{"1":"ASSAULT","2":"Tuesday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Tuesday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"ASSAULT","2":"Tuesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"MISSION"},{"1":"ASSAULT","2":"Tuesday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"TARAVAL"},{"1":"DRUG/NARCOTIC","2":"Tuesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"TENDERLOIN"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Tuesday","3":"MISSION"},{"1":"ASSAULT","2":"Tuesday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Tuesday","3":"CENTRAL"},{"1":"ASSAULT","2":"Tuesday","3":"INGLESIDE"},{"1":"DRUG/NARCOTIC","2":"Tuesday","3":"INGLESIDE"},{"1":"DRUG/NARCOTIC","2":"Tuesday","3":"NORTHERN"},{"1":"ASSAULT","2":"Monday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"ASSAULT","2":"Monday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Monday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Monday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Monday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Monday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Monday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"DRUG/NARCOTIC","2":"Monday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Monday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Monday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Monday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Monday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Monday","3":"PARK"},{"1":"ASSAULT","2":"Monday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Monday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"PARK"},{"1":"VEHICLE THEFT","2":"Monday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Monday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Monday","3":"TENDERLOIN"},{"1":"VEHICLE THEFT","2":"Monday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"ASSAULT","2":"Monday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Monday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"ASSAULT","2":"Monday","3":"BAYVIEW"},{"1":"DRUG/NARCOTIC","2":"Monday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Monday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Monday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Monday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"RICHMOND"},{"1":"VEHICLE THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"ASSAULT","2":"Monday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"DRUG/NARCOTIC","2":"Monday","3":"SOUTHERN"},{"1":"DRUG/NARCOTIC","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Monday","3":"RICHMOND"},{"1":"VEHICLE THEFT","2":"Monday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"DRUG/NARCOTIC","2":"Monday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Monday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"MISSION"},{"1":"ASSAULT","2":"Monday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Monday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"ASSAULT","2":"Monday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Monday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Monday","3":"PARK"},{"1":"VEHICLE THEFT","2":"Monday","3":"RICHMOND"},{"1":"VEHICLE THEFT","2":"Monday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Monday","3":"NORTHERN"},{"1":"ASSAULT","2":"Monday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Monday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Monday","3":"BAYVIEW"},{"1":"VEHICLE THEFT","2":"Monday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Monday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"ASSAULT","2":"Monday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"ASSAULT","2":"Monday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Monday","3":"BAYVIEW"},{"1":"VEHICLE THEFT","2":"Monday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"ASSAULT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Monday","3":"NORTHERN"},{"1":"ASSAULT","2":"Monday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"ASSAULT","2":"Monday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Monday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Monday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Monday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"ASSAULT","2":"Monday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Monday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Monday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Monday","3":"TENDERLOIN"},{"1":"VEHICLE THEFT","2":"Monday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Monday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Monday","3":"BAYVIEW"},{"1":"DRUG/NARCOTIC","2":"Monday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"DRUG/NARCOTIC","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"ASSAULT","2":"Monday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Monday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Monday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Monday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Monday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Monday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Monday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Monday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Monday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Monday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"ASSAULT","2":"Monday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Monday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Monday","3":"BAYVIEW"},{"1":"VEHICLE THEFT","2":"Monday","3":"BAYVIEW"},{"1":"DRUG/NARCOTIC","2":"Monday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Monday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Monday","3":"TARAVAL"},{"1":"ASSAULT","2":"Monday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"CENTRAL"},{"1":"DRUG/NARCOTIC","2":"Monday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Monday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Monday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Monday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Monday","3":"PARK"},{"1":"ASSAULT","2":"Sunday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Sunday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Sunday","3":"NORTHERN"},{"1":"ASSAULT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Sunday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"ASSAULT","2":"Sunday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Sunday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Sunday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Sunday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Sunday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Sunday","3":"MISSION"},{"1":"ASSAULT","2":"Sunday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Sunday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Sunday","3":"RICHMOND"},{"1":"VEHICLE THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"DRUG/NARCOTIC","2":"Sunday","3":"TENDERLOIN"},{"1":"DRUG/NARCOTIC","2":"Sunday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"MISSION"},{"1":"DRUG/NARCOTIC","2":"Sunday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Sunday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Sunday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"RICHMOND"},{"1":"ASSAULT","2":"Sunday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Sunday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Sunday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Sunday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Sunday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Sunday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"RICHMOND"},{"1":"VEHICLE THEFT","2":"Sunday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Sunday","3":"CENTRAL"},{"1":"ASSAULT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Sunday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Sunday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"RICHMOND"},{"1":"VEHICLE THEFT","2":"Sunday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Sunday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Sunday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Sunday","3":"TARAVAL"},{"1":"ASSAULT","2":"Sunday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Sunday","3":"RICHMOND"},{"1":"ASSAULT","2":"Sunday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Sunday","3":"BAYVIEW"},{"1":"VEHICLE THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Sunday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"ASSAULT","2":"Sunday","3":"NORTHERN"},{"1":"ASSAULT","2":"Sunday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Sunday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Sunday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"ASSAULT","2":"Sunday","3":"TARAVAL"},{"1":"ASSAULT","2":"Sunday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"MISSION"},{"1":"ASSAULT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"ASSAULT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Sunday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Sunday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Sunday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"DRUG/NARCOTIC","2":"Sunday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Sunday","3":"INGLESIDE"},{"1":"ASSAULT","2":"Sunday","3":"CENTRAL"},{"1":"ASSAULT","2":"Sunday","3":"CENTRAL"},{"1":"ASSAULT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"ASSAULT","2":"Sunday","3":"MISSION"},{"1":"ASSAULT","2":"Sunday","3":"INGLESIDE"},{"1":"ASSAULT","2":"Sunday","3":"CENTRAL"},{"1":"ASSAULT","2":"Sunday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Sunday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Sunday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TARAVAL"},{"1":"ASSAULT","2":"Sunday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"RICHMOND"},{"1":"ASSAULT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Sunday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Sunday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Sunday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Sunday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"DRUG/NARCOTIC","2":"Saturday","3":"RICHMOND"},{"1":"VEHICLE THEFT","2":"Saturday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"ASSAULT","2":"Saturday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Saturday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Saturday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Saturday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Saturday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"TENDERLOIN"},{"1":"DRUG/NARCOTIC","2":"Saturday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Saturday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Saturday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Saturday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"PARK"},{"1":"ASSAULT","2":"Saturday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Saturday","3":"MISSION"},{"1":"ASSAULT","2":"Saturday","3":"MISSION"},{"1":"ASSAULT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Saturday","3":"MISSION"},{"1":"ASSAULT","2":"Saturday","3":"MISSION"},{"1":"ASSAULT","2":"Saturday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Saturday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Saturday","3":"CENTRAL"},{"1":"ASSAULT","2":"Saturday","3":"TENDERLOIN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"RICHMOND"},{"1":"VEHICLE THEFT","2":"Saturday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Saturday","3":"RICHMOND"},{"1":"DRUG/NARCOTIC","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Saturday","3":"MISSION"},{"1":"DRUG/NARCOTIC","2":"Saturday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Saturday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TENDERLOIN"},{"1":"ASSAULT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"PARK"},{"1":"ASSAULT","2":"Saturday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Saturday","3":"MISSION"},{"1":"DRUG/NARCOTIC","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TARAVAL"},{"1":"ASSAULT","2":"Saturday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Saturday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TARAVAL"},{"1":"ASSAULT","2":"Saturday","3":"NORTHERN"},{"1":"ASSAULT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"MISSION"},{"1":"ASSAULT","2":"Saturday","3":"TARAVAL"},{"1":"ASSAULT","2":"Saturday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TARAVAL"},{"1":"ASSAULT","2":"Saturday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Saturday","3":"TENDERLOIN"},{"1":"ASSAULT","2":"Saturday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"ASSAULT","2":"Saturday","3":"MISSION"},{"1":"ASSAULT","2":"Saturday","3":"PARK"},{"1":"ASSAULT","2":"Saturday","3":"PARK"},{"1":"ASSAULT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"CENTRAL"},{"1":"ASSAULT","2":"Saturday","3":"MISSION"},{"1":"VEHICLE THEFT","2":"Saturday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"ASSAULT","2":"Saturday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"DRUG/NARCOTIC","2":"Saturday","3":"NORTHERN"},{"1":"DRUG/NARCOTIC","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Saturday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Saturday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Friday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Friday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Friday","3":"INGLESIDE"},{"1":"VEHICLE THEFT","2":"Friday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Friday","3":"TENDERLOIN"},{"1":"ASSAULT","2":"Friday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"PARK"},{"1":"ASSAULT","2":"Friday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Friday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Friday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Friday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Friday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Friday","3":"TENDERLOIN"},{"1":"ASSAULT","2":"Friday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Friday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Friday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Friday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"TARAVAL"},{"1":"ASSAULT","2":"Friday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Friday","3":"BAYVIEW"},{"1":"DRUG/NARCOTIC","2":"Friday","3":"BAYVIEW"},{"1":"DRUG/NARCOTIC","2":"Friday","3":"BAYVIEW"},{"1":"DRUG/NARCOTIC","2":"Friday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Friday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Friday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Friday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"CENTRAL"},{"1":"VEHICLE THEFT","2":"Friday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Friday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"DRUG/NARCOTIC","2":"Friday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Friday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Friday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Friday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"RICHMOND"},{"1":"VEHICLE THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Friday","3":"RICHMOND"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"TARAVAL"},{"1":"VEHICLE THEFT","2":"Friday","3":"BAYVIEW"},{"1":"VEHICLE THEFT","2":"Friday","3":"PARK"},{"1":"VEHICLE THEFT","2":"Friday","3":"PARK"},{"1":"ASSAULT","2":"Friday","3":"CENTRAL"},{"1":"ASSAULT","2":"Friday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Friday","3":"TARAVAL"},{"1":"ASSAULT","2":"Friday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Friday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"ASSAULT","2":"Friday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Friday","3":"RICHMOND"},{"1":"VEHICLE THEFT","2":"Friday","3":"TARAVAL"},{"1":"ASSAULT","2":"Friday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Friday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Friday","3":"MISSION"},{"1":"ASSAULT","2":"Friday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Friday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"TENDERLOIN"},{"1":"ASSAULT","2":"Friday","3":"TARAVAL"},{"1":"ASSAULT","2":"Friday","3":"BAYVIEW"},{"1":"ASSAULT","2":"Friday","3":"MISSION"},{"1":"ASSAULT","2":"Friday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Friday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Friday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Friday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"ASSAULT","2":"Friday","3":"NORTHERN"},{"1":"ASSAULT","2":"Friday","3":"NORTHERN"},{"1":"VEHICLE THEFT","2":"Friday","3":"BAYVIEW"},{"1":"LARCENY/THEFT","2":"Friday","3":"TENDERLOIN"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"CENTRAL"},{"1":"ASSAULT","2":"Friday","3":"CENTRAL"},{"1":"ASSAULT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Friday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Friday","3":"CENTRAL"},{"1":"ASSAULT","2":"Friday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Friday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Friday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"VEHICLE THEFT","2":"Friday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"BAYVIEW"},{"1":"VEHICLE THEFT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"DRUG/NARCOTIC","2":"Friday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Friday","3":"INGLESIDE"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"PARK"},{"1":"LARCENY/THEFT","2":"Friday","3":"MISSION"},{"1":"ASSAULT","2":"Friday","3":"PARK"},{"1":"ASSAULT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"CENTRAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"RICHMOND"},{"1":"ASSAULT","2":"Friday","3":"MISSION"},{"1":"ASSAULT","2":"Friday","3":"RICHMOND"},{"1":"ASSAULT","2":"Friday","3":"RICHMOND"},{"1":"ASSAULT","2":"Friday","3":"PARK"},{"1":"VEHICLE THEFT","2":"Friday","3":"TARAVAL"},{"1":"ASSAULT","2":"Friday","3":"MISSION"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"NORTHERN"},{"1":"LARCENY/THEFT","2":"Friday","3":"TARAVAL"},{"1":"LARCENY/THEFT","2":"Friday","3":"SOUTHERN"},{"1":"ASSAULT","2":"Friday","3":"NORTHERN"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>This is a tidied-up version of the data, with only the variables we’ll
look at, and only the observations from one of the “big four”
crimes, a mere 300,000 of them. This is the data set we created earlier.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Fit a multinomial logistic
regression that predicts crime category from day of week and
district. (You don’t need to look at it.) The model-fitting produces
some output. (If you’re using R Markdown, that will
come with it.)</li>
</ol>
<p>Solution</p>
<p>The modelling part is easy enough, as long as you can get the
uppercase letters in the right places:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="logistic-regression-with-nominal-response.html#cb348-1"></a>sfcrime<span class="fl">.1</span> &lt;-<span class="st"> </span><span class="kw">multinom</span>(Category<span class="op">~</span>DayOfWeek<span class="op">+</span>PdDistrict,<span class="dt">data=</span>sfcrime)</span></code></pre></div>
<pre><code>## # weights:  68 (48 variable)
## initial  value 498411.639069 
## iter  10 value 430758.073422
## iter  20 value 430314.270403
## iter  30 value 423303.587698
## iter  40 value 420883.528523
## iter  50 value 418355.242764
## final  value 418149.979622 
## converged</code></pre>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Fit a model that predicts Category from only the
district. Hand in the output from the fitting process as well.</li>
</ol>
<p>Solution</p>
<p>Same idea. Write it out, or use <code>update</code>:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="logistic-regression-with-nominal-response.html#cb350-1"></a>sfcrime<span class="fl">.2</span> &lt;-<span class="st"> </span><span class="kw">update</span>(sfcrime<span class="fl">.1</span>,.<span class="op">~</span>.<span class="op">-</span>DayOfWeek)</span></code></pre></div>
<pre><code>## # weights:  44 (30 variable)
## initial  value 498411.639069 
## iter  10 value 426003.543845
## iter  20 value 425542.806828
## iter  30 value 421715.787609
## final  value 418858.235297 
## converged</code></pre>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="4" style="list-style-type: lower-alpha">
<li>Use <code>anova</code> to compare the two models you just
obtained. What does the <code>anova</code> tell you?</li>
</ol>
<p>Solution</p>
<p>This:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="logistic-regression-with-nominal-response.html#cb352-1"></a><span class="kw">anova</span>(sfcrime<span class="fl">.2</span>,sfcrime<span class="fl">.1</span>)</span></code></pre></div>
<pre><code>## Likelihood ratio tests of Multinomial Models
## 
## Response: Category
##                    Model Resid. df Resid. Dev   Test    Df LR stat. Pr(Chi)
## 1             PdDistrict   1078554   837716.5                              
## 2 DayOfWeek + PdDistrict   1078536   836300.0 1 vs 2    18 1416.511       0</code></pre>
<p>This is a very small P-value. The null hypothesis is that the two
models are equally good, and this is clearly rejected. We need the
bigger model: that is, we need to keep <code>DayOfWeek</code> in there,
because the pattern of crimes (in each district) differs over day of
week.</p>
<p>One reason the P-value came out so small is that we have a ton of
data, so that even a very small difference between days of the week
could come out very strongly significant. The Machine Learning people
(this is a machine learning dataset) don’t worry so much about tests
for that reason: they are more concerned with predicting things well,
so they just throw everything into the model and see what comes out.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="5" style="list-style-type: lower-alpha">
<li>Using your preferred model, obtain predicted probabilities
that a crime will be of each of these four categories for each day of
the week in the <code>TENDERLOIN</code> district (the name is ALL
CAPS). This will mean constructing a data frame to predict from,
obtaining the predictions and then displaying them suitably.</li>
</ol>
<p>Solution</p>
<p>I left this one fairly open, because you’ve done this kind of thing
before, so what you need to do ought to be fairly clear:
Construct the values to predict for with plural names:<a href="#fn45" class="footnote-ref" id="fnref45"><sup>45</sup></a></p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="logistic-regression-with-nominal-response.html#cb354-1"></a>DayOfWeeks &lt;-<span class="st"> </span>sfcrime <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(DayOfWeek) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(DayOfWeek)</span>
<span id="cb354-2"><a href="logistic-regression-with-nominal-response.html#cb354-2"></a>DayOfWeeks</span></code></pre></div>
<pre><code>## [1] &quot;Wednesday&quot; &quot;Tuesday&quot;   &quot;Monday&quot;    &quot;Sunday&quot;    &quot;Saturday&quot;  &quot;Friday&quot;   
## [7] &quot;Thursday&quot;</code></pre>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="logistic-regression-with-nominal-response.html#cb356-1"></a>PdDistricts &lt;-<span class="st"> &quot;TENDERLOIN&quot;</span></span></code></pre></div>
<p>The days of the week are in the order they came out in the data. I
could fix this up, but the thing that matters for us is that Saturday
and Sunday came out next to each other.</p>
<p>Anyway, it’s about right, even though only one of the variables is
actually plural and the other plural came out wrong.</p>
<p>Then, make data frame of combinations. The nice thing is that if we
had more than one district, we’d just define <code>PdDistricts</code>
appropriately above and the rest of it would be the same:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="logistic-regression-with-nominal-response.html#cb357-1"></a>sfcrime.new &lt;-<span class="st"> </span><span class="kw">crossing</span>(<span class="dt">DayOfWeek=</span>DayOfWeeks,<span class="dt">PdDistrict=</span>PdDistricts)</span>
<span id="cb357-2"><a href="logistic-regression-with-nominal-response.html#cb357-2"></a>sfcrime.new</span></code></pre></div>
<pre><code>## # A tibble: 7 x 2
##   DayOfWeek PdDistrict
##   &lt;chr&gt;     &lt;chr&gt;     
## 1 Friday    TENDERLOIN
## 2 Monday    TENDERLOIN
## 3 Saturday  TENDERLOIN
## 4 Sunday    TENDERLOIN
## 5 Thursday  TENDERLOIN
## 6 Tuesday   TENDERLOIN
## 7 Wednesday TENDERLOIN</code></pre>
<p>Then do the predictions:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="logistic-regression-with-nominal-response.html#cb359-1"></a>p &lt;-<span class="st"> </span><span class="kw">predict</span>(sfcrime<span class="fl">.1</span>,sfcrime.new,<span class="dt">type=</span><span class="st">&quot;probs&quot;</span>)</span></code></pre></div>
<p>I can never remember the <code>type</code> thing for these models, because
they are <em>all different</em>. I just make a guess, and if I guess
something that this version of <code>predict</code> doesn’t know about,
it’ll tell me:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="logistic-regression-with-nominal-response.html#cb360-1"></a>p &lt;-<span class="st"> </span><span class="kw">predict</span>(sfcrime<span class="fl">.1</span>,sfcrime.new,<span class="dt">type=</span><span class="st">&quot;bananas&quot;</span>)</span></code></pre></div>
<pre><code>## Error in match.arg(type): &#39;arg&#39; should be one of &quot;class&quot;, &quot;probs&quot;</code></pre>
<p>I can work out from this that <code>type</code> should be <code>probs</code>,
since the other one makes the best guess at which category of response
you’ll get (the one with the highest probability). The predicted
probabilities are more informative, since then you can see how they
change, even if the predicted category stays the same.<a href="#fn46" class="footnote-ref" id="fnref46"><sup>46</sup></a></p>
<p>Finally, display the results. I thought <code>cbind</code> wouldn’t work
here, because some of the variables are factors and some are numbers,
but <code>cbind</code> is smarter than that:<a href="#fn47" class="footnote-ref" id="fnref47"><sup>47</sup></a></p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="logistic-regression-with-nominal-response.html#cb362-1"></a><span class="kw">cbind</span>(sfcrime.new,p)</span></code></pre></div>
<pre><code>##   DayOfWeek PdDistrict   ASSAULT DRUG/NARCOTIC LARCENY/THEFT VEHICLE THEFT
## 1    Friday TENDERLOIN 0.2125997     0.4658122     0.2907793    0.03080879
## 2    Monday TENDERLOIN 0.2072430     0.5001466     0.2656069    0.02700348
## 3  Saturday TENDERLOIN 0.2425998     0.4200751     0.3060611    0.03126405
## 4    Sunday TENDERLOIN 0.2548597     0.4287291     0.2868682    0.02954299
## 5  Thursday TENDERLOIN 0.1938754     0.5179500     0.2617658    0.02640888
## 6   Tuesday TENDERLOIN 0.1942447     0.5208668     0.2593331    0.02555535
## 7 Wednesday TENDERLOIN 0.1874867     0.5400287     0.2479498    0.02453490</code></pre>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="6" style="list-style-type: lower-alpha">
<li>Describe briefly how the weekend days Saturday and Sunday
differ from the rest.</li>
</ol>
<p>Solution</p>
<p>The days ended up in some quasi-random order, but Saturday and Sunday are
still together, so we can still easily compare them with the rest.
My take is that the last two columns don’t differ much between
weekday and weekend, but the first two columns do: the probability
of a crime being an assault is a bit higher on the weekend, and the
probability of a crime being drug-related is a bit lower.
I will accept anything reasonable supported by the predictions you got.
We said there was a strongly significant day-of-week effect, but the
changes from weekday to weekend are actually pretty small (but the
changes from one weekday to another are even smaller). This supports
what I guessed before, that with this much data even a small effect
(the one shown here) is statistically
significant.<a href="#fn48" class="footnote-ref" id="fnref48"><sup>48</sup></a>
I want to compare another district. What districts do we have?</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="logistic-regression-with-nominal-response.html#cb364-1"></a>sfcrime <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(PdDistrict)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    PdDistrict     n
##    &lt;chr&gt;      &lt;int&gt;
##  1 BAYVIEW    31693
##  2 CENTRAL    38052
##  3 INGLESIDE  30102
##  4 MISSION    45277
##  5 NORTHERN   47750
##  6 PARK       19197
##  7 RICHMOND   18211
##  8 SOUTHERN   67981
##  9 TARAVAL    24981
## 10 TENDERLOIN 36284</code></pre>
<p>This is the number of our “big four” crimes committed in each
district. Let’s look at the lowest-crime district <code>RICHMOND</code>. I
copy and paste my code. Since I want to compare two districts, I
include both:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="logistic-regression-with-nominal-response.html#cb366-1"></a>DayOfWeeks &lt;-<span class="st"> </span>sfcrime <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(DayOfWeek) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(DayOfWeek)</span>
<span id="cb366-2"><a href="logistic-regression-with-nominal-response.html#cb366-2"></a>PdDistricts &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;RICHMOND&quot;</span>,<span class="st">&quot;TENDERLOIN&quot;</span>)</span>
<span id="cb366-3"><a href="logistic-regression-with-nominal-response.html#cb366-3"></a>sfcrime.new &lt;-<span class="st"> </span><span class="kw">crossing</span>(<span class="dt">DayOfWeek=</span>DayOfWeeks,<span class="dt">PdDistrict=</span>PdDistricts)</span>
<span id="cb366-4"><a href="logistic-regression-with-nominal-response.html#cb366-4"></a>sfcrime.new</span></code></pre></div>
<pre><code>## # A tibble: 14 x 2
##    DayOfWeek PdDistrict
##    &lt;chr&gt;     &lt;chr&gt;     
##  1 Friday    RICHMOND  
##  2 Friday    TENDERLOIN
##  3 Monday    RICHMOND  
##  4 Monday    TENDERLOIN
##  5 Saturday  RICHMOND  
##  6 Saturday  TENDERLOIN
##  7 Sunday    RICHMOND  
##  8 Sunday    TENDERLOIN
##  9 Thursday  RICHMOND  
## 10 Thursday  TENDERLOIN
## 11 Tuesday   RICHMOND  
## 12 Tuesday   TENDERLOIN
## 13 Wednesday RICHMOND  
## 14 Wednesday TENDERLOIN</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="logistic-regression-with-nominal-response.html#cb368-1"></a>p1 &lt;-<span class="st"> </span><span class="kw">predict</span>(sfcrime<span class="fl">.1</span>,sfcrime.new,<span class="dt">type=</span><span class="st">&quot;probs&quot;</span>)</span>
<span id="cb368-2"><a href="logistic-regression-with-nominal-response.html#cb368-2"></a>d1 &lt;-<span class="st"> </span><span class="kw">cbind</span>(sfcrime.new,p1) ; d1</span></code></pre></div>
<pre><code>##    DayOfWeek PdDistrict   ASSAULT DRUG/NARCOTIC LARCENY/THEFT VEHICLE THEFT
## 1     Friday   RICHMOND 0.1666304    0.04944552     0.5466635    0.23726062
## 2     Friday TENDERLOIN 0.2125997    0.46581221     0.2907793    0.03080879
## 3     Monday   RICHMOND 0.1760175    0.05753044     0.5411034    0.22534869
## 4     Monday TENDERLOIN 0.2072430    0.50014661     0.2656069    0.02700348
## 5   Saturday   RICHMOND 0.1809352    0.04243108     0.5475273    0.22910644
## 6   Saturday TENDERLOIN 0.2425998    0.42007509     0.3060611    0.03126405
## 7     Sunday   RICHMOND 0.1973675    0.04496576     0.5328708    0.22479591
## 8     Sunday TENDERLOIN 0.2548597    0.42872910     0.2868682    0.02954299
## 9   Thursday   RICHMOND 0.1683841    0.06092432     0.5453260    0.22536564
## 10  Thursday TENDERLOIN 0.1938754    0.51795000     0.2617658    0.02640888
## 11   Tuesday   RICHMOND 0.1706999    0.06199196     0.5466472    0.22066087
## 12   Tuesday TENDERLOIN 0.1942447    0.52086682     0.2593331    0.02555535
## 13 Wednesday   RICHMOND 0.1709963    0.06670490     0.5424317    0.21986703
## 14 Wednesday TENDERLOIN 0.1874867    0.54002868     0.2479498    0.02453490</code></pre>
<p>Richmond is obviously not a drug-dealing kind of place; most of its
crimes are theft of one kind or another. But the predicted effect of
weekday vs. weekend is the same: Richmond doesn’t have many assaults
or drug crimes, but it also has more assaults and fewer drug crimes on
the weekend than during the week. There is not much effect of day of
the week on the other two crime types in either place.</p>
<p>The consistency of <em>pattern</em>, even though the prevalence of the
different crime types differs by location, is a feature of the model:
we fitted an additive model, that says there is an effect of weekday,
and <em>independently</em> there is an effect of location. The
<em>pattern</em> over weekday is the same for each location, implied by
the model. This may or may not be supported by the actual data.</p>
<p>The way to assess this is to fit a model with interaction (we will see
more of this when we revisit ANOVA later), and compare the fit:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="logistic-regression-with-nominal-response.html#cb370-1"></a>sfcrime<span class="fl">.3</span> &lt;-<span class="st"> </span><span class="kw">update</span>(sfcrime<span class="fl">.1</span>,.<span class="op">~</span>.<span class="op">+</span>DayOfWeek<span class="op">*</span>PdDistrict)</span></code></pre></div>
<pre><code>## # weights:  284 (210 variable)
## initial  value 498411.639069 
## iter  10 value 429631.807781
## iter  20 value 429261.427210
## iter  30 value 428111.625547
## iter  40 value 423807.031450
## iter  50 value 421129.496196
## iter  60 value 420475.833895
## iter  70 value 419523.235916
## iter  80 value 418621.612920
## iter  90 value 418147.629782
## iter 100 value 418036.670485
## final  value 418036.670485 
## stopped after 100 iterations</code></pre>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="logistic-regression-with-nominal-response.html#cb372-1"></a><span class="co"># anova(sfcrime.1,sfcrime.3)</span></span></code></pre></div>
<p>This one didn’t actually complete the fitting process: it got to 100
times around and stopped (since that’s the default limit). We can make
it go a bit further thus:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="logistic-regression-with-nominal-response.html#cb373-1"></a>sfcrime<span class="fl">.3</span> &lt;-<span class="st"> </span><span class="kw">update</span>(sfcrime<span class="fl">.1</span>,.<span class="op">~</span>.<span class="op">+</span>DayOfWeek<span class="op">*</span>PdDistrict,<span class="dt">maxit=</span><span class="dv">300</span>)</span></code></pre></div>
<pre><code>## # weights:  284 (210 variable)
## initial  value 498411.639069 
## iter  10 value 429631.807781
## iter  20 value 429261.427210
## iter  30 value 428111.625547
## iter  40 value 423807.031450
## iter  50 value 421129.496196
## iter  60 value 420475.833895
## iter  70 value 419523.235916
## iter  80 value 418621.612920
## iter  90 value 418147.629782
## iter 100 value 418036.670485
## iter 110 value 417957.337016
## iter 120 value 417908.465189
## iter 130 value 417890.580843
## iter 140 value 417874.839492
## iter 150 value 417867.449342
## iter 160 value 417862.626213
## iter 170 value 417858.654628
## final  value 417858.031854 
## converged</code></pre>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="logistic-regression-with-nominal-response.html#cb375-1"></a><span class="kw">anova</span>(sfcrime<span class="fl">.1</span>,sfcrime<span class="fl">.3</span>)</span></code></pre></div>
<pre><code>## Likelihood ratio tests of Multinomial Models
## 
## Response: Category
##                                           Model Resid. df Resid. Dev   Test    Df
## 1                        DayOfWeek + PdDistrict   1078536   836300.0             
## 2 DayOfWeek + PdDistrict + DayOfWeek:PdDistrict   1078374   835716.1 1 vs 2   162
##   LR stat. Pr(Chi)
## 1                 
## 2 583.8955       0</code></pre>
<p>This time, we got to the end. (The <code>maxit=300</code> gets passed on
to <code>multinom</code>, and says “go around up to 300 times if needed”.)
As you will see if you try it, this takes a bit of time to
run.</p>
<p>This <code>anova</code> is also strongly significant, but in the light of
the previous discussion, the differential effect of day of week in
different districts might not be very big. We can even assess that; we
have all the machinery for the predictions, and we just have to apply
them to this model:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="logistic-regression-with-nominal-response.html#cb377-1"></a>p3 &lt;-<span class="st"> </span><span class="kw">predict</span>(sfcrime<span class="fl">.3</span>,sfcrime.new,<span class="dt">type=</span><span class="st">&quot;probs&quot;</span>)</span>
<span id="cb377-2"><a href="logistic-regression-with-nominal-response.html#cb377-2"></a>d3 &lt;-<span class="st"> </span><span class="kw">cbind</span>(sfcrime.new,p3) ; d3</span></code></pre></div>
<pre><code>##    DayOfWeek PdDistrict   ASSAULT DRUG/NARCOTIC LARCENY/THEFT VEHICLE THEFT
## 1     Friday   RICHMOND 0.1756062    0.05241934     0.5447797    0.22719474
## 2     Friday TENDERLOIN 0.2163513    0.44958359     0.3006968    0.03336831
## 3     Monday   RICHMOND 0.1668855    0.06038366     0.5537600    0.21897087
## 4     Monday TENDERLOIN 0.2061337    0.51256922     0.2569954    0.02430166
## 5   Saturday   RICHMOND 0.1859514    0.04414673     0.5244262    0.24547574
## 6   Saturday TENDERLOIN 0.2368561    0.41026767     0.3221820    0.03069417
## 7     Sunday   RICHMOND 0.1851406    0.05211970     0.5403967    0.22234300
## 8     Sunday TENDERLOIN 0.2570331    0.40019234     0.3101184    0.03265625
## 9   Thursday   RICHMOND 0.1811185    0.05621201     0.5394484    0.22322107
## 10  Thursday TENDERLOIN 0.1951851    0.52867900     0.2528465    0.02328943
## 11   Tuesday   RICHMOND 0.1758111    0.05587178     0.5471405    0.22117663
## 12   Tuesday TENDERLOIN 0.1907137    0.53955543     0.2419757    0.02775520
## 13 Wednesday   RICHMOND 0.1603796    0.06279956     0.5525565    0.22426437
## 14 Wednesday TENDERLOIN 0.1906309    0.54577677     0.2401585    0.02343381</code></pre>
<p>It doesn’t <em>look</em> much different. Maybe the Tenderloin has a
larger weekend increase in assaults than Richmond does. I saved these
predictions in data frames so that I could compare them. Columns 3
through 6 contain the actual predictions; let’s take the difference
between them, and glue it back onto the district and day of week. I
rounded the prediction differences off to 4 decimals to make the
largest ones easier to find:</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="logistic-regression-with-nominal-response.html#cb379-1"></a>pdiff &lt;-<span class="st"> </span><span class="kw">round</span>(p3<span class="op">-</span>p1, <span class="dv">4</span>)</span>
<span id="cb379-2"><a href="logistic-regression-with-nominal-response.html#cb379-2"></a><span class="kw">cbind</span>(sfcrime.new, pdiff)</span></code></pre></div>
<pre><code>##    DayOfWeek PdDistrict ASSAULT DRUG/NARCOTIC LARCENY/THEFT VEHICLE THEFT
## 1     Friday   RICHMOND  0.0090        0.0030       -0.0019       -0.0101
## 2     Friday TENDERLOIN  0.0038       -0.0162        0.0099        0.0026
## 3     Monday   RICHMOND -0.0091        0.0029        0.0127       -0.0064
## 4     Monday TENDERLOIN -0.0011        0.0124       -0.0086       -0.0027
## 5   Saturday   RICHMOND  0.0050        0.0017       -0.0231        0.0164
## 6   Saturday TENDERLOIN -0.0057       -0.0098        0.0161       -0.0006
## 7     Sunday   RICHMOND -0.0122        0.0072        0.0075       -0.0025
## 8     Sunday TENDERLOIN  0.0022       -0.0285        0.0233        0.0031
## 9   Thursday   RICHMOND  0.0127       -0.0047       -0.0059       -0.0021
## 10  Thursday TENDERLOIN  0.0013        0.0107       -0.0089       -0.0031
## 11   Tuesday   RICHMOND  0.0051       -0.0061        0.0005        0.0005
## 12   Tuesday TENDERLOIN -0.0035        0.0187       -0.0174        0.0022
## 13 Wednesday   RICHMOND -0.0106       -0.0039        0.0101        0.0044
## 14 Wednesday TENDERLOIN  0.0031        0.0057       -0.0078       -0.0011</code></pre>
<p>None of the predicted probabilities differ by more than 0.04, which is
consistent with the size of the interaction effect being small even
though significant. Some of the differences largest in size are
Drugs-Narcotics in Tenderloin, but even they are not big.</p>
<p>The programmer in me wants to find a way to display the largest and
smallest few differences. My idea is to use <code>pivot_longer</code> to make
<em>one</em> column of differences and sort it, then
display the top and bottom few values. Note that
I have to put those little “backticks” around <code>VEHICLE THEFT</code>
since the variable name has a space in it. My code inefficiently sorts
the differences twice:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="logistic-regression-with-nominal-response.html#cb381-1"></a><span class="kw">cbind</span>(sfcrime.new,pdiff) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb381-2"><a href="logistic-regression-with-nominal-response.html#cb381-2"></a><span class="st">  </span><span class="kw">pivot_longer</span>(ASSAULT<span class="op">:</span><span class="st">`</span><span class="dt">VEHICLE THEFT</span><span class="st">`</span>, <span class="dt">names_to=</span><span class="st">&quot;crimetype&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;difference&quot;</span>) -&gt;<span class="st"> </span>d1</span>
<span id="cb381-3"><a href="logistic-regression-with-nominal-response.html#cb381-3"></a>d1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(difference) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   DayOfWeek PdDistrict crimetype     difference
##   &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;              &lt;dbl&gt;
## 1 Sunday    TENDERLOIN DRUG/NARCOTIC    -0.0285
## 2 Saturday  RICHMOND   LARCENY/THEFT    -0.0231
## 3 Tuesday   TENDERLOIN LARCENY/THEFT    -0.0174
## 4 Friday    TENDERLOIN DRUG/NARCOTIC    -0.0162
## 5 Sunday    RICHMOND   ASSAULT          -0.0122
## 6 Wednesday RICHMOND   ASSAULT          -0.0106</code></pre>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="logistic-regression-with-nominal-response.html#cb383-1"></a>d1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="kw">desc</span>(difference)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   DayOfWeek PdDistrict crimetype     difference
##   &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;              &lt;dbl&gt;
## 1 Sunday    TENDERLOIN LARCENY/THEFT     0.0233
## 2 Tuesday   TENDERLOIN DRUG/NARCOTIC     0.0187
## 3 Saturday  RICHMOND   VEHICLE THEFT     0.0164
## 4 Saturday  TENDERLOIN LARCENY/THEFT     0.0161
## 5 Monday    RICHMOND   LARCENY/THEFT     0.0127
## 6 Thursday  RICHMOND   ASSAULT           0.0127</code></pre>
<p>I don’t know what, if anything, you make of those.</p>
<p>Extra: there is a better way of doing those in one go:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="logistic-regression-with-nominal-response.html#cb385-1"></a>d1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">top_n</span>(<span class="dv">6</span>, difference)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   DayOfWeek PdDistrict crimetype     difference
##   &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;              &lt;dbl&gt;
## 1 Monday    RICHMOND   LARCENY/THEFT     0.0127
## 2 Saturday  RICHMOND   VEHICLE THEFT     0.0164
## 3 Saturday  TENDERLOIN LARCENY/THEFT     0.0161
## 4 Sunday    TENDERLOIN LARCENY/THEFT     0.0233
## 5 Thursday  RICHMOND   ASSAULT           0.0127
## 6 Tuesday   TENDERLOIN DRUG/NARCOTIC     0.0187</code></pre>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="logistic-regression-with-nominal-response.html#cb387-1"></a>d1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">top_n</span>(<span class="dv">6</span>, <span class="op">-</span>difference)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   DayOfWeek PdDistrict crimetype     difference
##   &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;              &lt;dbl&gt;
## 1 Friday    TENDERLOIN DRUG/NARCOTIC    -0.0162
## 2 Saturday  RICHMOND   LARCENY/THEFT    -0.0231
## 3 Sunday    RICHMOND   ASSAULT          -0.0122
## 4 Sunday    TENDERLOIN DRUG/NARCOTIC    -0.0285
## 5 Tuesday   TENDERLOIN LARCENY/THEFT    -0.0174
## 6 Wednesday RICHMOND   ASSAULT          -0.0106</code></pre>
<p>that is just slicker. What it
actually does is almost the same as my code, but it saves you worrying about
the details. (It picks out the top 6, but without putting them in
order.)</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="crimes-in-san-francisco-the-data-1" class="section level2" number="28.11">
<h2><span class="header-section-number">28.11</span> Crimes in San Francisco – the data</h2>
<p>The data in <a href="http://utsc.utoronto.ca/~butler/d29/sfcrime.csv">link</a> is a huge dataset of crimes committed in San
Francisco between 2003 and 2015. The variables are:</p>
<ul>
<li><p><code>Dates</code>: the date and time of the crime</p></li>
<li><p><code>Category</code>: the category of crime, eg. “larceny” or
“vandalism” (response).</p></li>
<li><p><code>Descript</code>: detailed description of crime.</p></li>
<li><p><code>DayOfWeek</code>: the day of the week of the crime.</p></li>
<li><p><code>PdDistrict</code>: the name of the San Francisco Police
Department district in which the crime took place.</p></li>
<li><p><code>Resolution</code>: how the crime was resolved</p></li>
<li><p><code>Address</code>: approximate street address of crime</p></li>
<li><p><code>X</code>: longitude</p></li>
<li><p><code>Y</code>: latitude</p></li>
</ul>
<p>Our aim is to see whether the category of crime depends on the day of
the week and the district in which it occurred. However, there are a
lot of crime categories, so we will focus on the top four
“interesting” ones, which we will have to discover.</p>
<ol style="list-style-type: lower-alpha">
<li>Read in the data and verify that you have these columns and a
lot of rows. (The data may take a moment to read in. You will see why.)</li>
</ol>
<p>Solution</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="logistic-regression-with-nominal-response.html#cb389-1"></a>my_url=<span class="st">&quot;http://utsc.utoronto.ca/~butler/d29/sfcrime.csv&quot;</span></span>
<span id="cb389-2"><a href="logistic-regression-with-nominal-response.html#cb389-2"></a>sfcrime=<span class="kw">read_csv</span>(my_url)</span></code></pre></div>
<pre><code>## 
## ── Column specification ──────────────────────────────────────────────────────────────────
## cols(
##   Dates = col_datetime(format = &quot;&quot;),
##   Category = col_character(),
##   Descript = col_character(),
##   DayOfWeek = col_character(),
##   PdDistrict = col_character(),
##   Resolution = col_character(),
##   Address = col_character(),
##   X = col_double(),
##   Y = col_double()
## )</code></pre>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="logistic-regression-with-nominal-response.html#cb391-1"></a>sfcrime</span></code></pre></div>
<pre><code>## # A tibble: 878,049 x 9
##    Dates               Category  Descript   DayOfWeek PdDistrict Resolution Address      X
##    &lt;dttm&gt;              &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;    &lt;dbl&gt;
##  1 2015-05-13 23:53:00 WARRANTS  WARRANT A… Wednesday NORTHERN   ARREST, B… OAK ST … -122.
##  2 2015-05-13 23:53:00 OTHER OF… TRAFFIC V… Wednesday NORTHERN   ARREST, B… OAK ST … -122.
##  3 2015-05-13 23:33:00 OTHER OF… TRAFFIC V… Wednesday NORTHERN   ARREST, B… VANNESS… -122.
##  4 2015-05-13 23:30:00 LARCENY/… GRAND THE… Wednesday NORTHERN   NONE       1500 Bl… -122.
##  5 2015-05-13 23:30:00 LARCENY/… GRAND THE… Wednesday PARK       NONE       100 Blo… -122.
##  6 2015-05-13 23:30:00 LARCENY/… GRAND THE… Wednesday INGLESIDE  NONE       0 Block… -122.
##  7 2015-05-13 23:30:00 VEHICLE … STOLEN AU… Wednesday INGLESIDE  NONE       AVALON … -122.
##  8 2015-05-13 23:30:00 VEHICLE … STOLEN AU… Wednesday BAYVIEW    NONE       KIRKWOO… -122.
##  9 2015-05-13 23:00:00 LARCENY/… GRAND THE… Wednesday RICHMOND   NONE       600 Blo… -123.
## 10 2015-05-13 23:00:00 LARCENY/… GRAND THE… Wednesday CENTRAL    NONE       JEFFERS… -122.
## # … with 878,039 more rows, and 1 more variable: Y &lt;dbl&gt;</code></pre>
<p>Those columns indeed, and pushing a million rows! That’s why it took
so long!</p>
<p>There are also 39 categories of crime, so we need to cut that down
some. There are only ten districts, however, so we should be able to
use that as is.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>How is the response variable here different to the one in
the question about steak preferences (and therefore why would
<code>multinom</code> from package <code>nnet</code> be the method of choice)?</li>
</ol>
<p>Solution</p>
<p>Steak preferences have a natural order, while crime categories do
not. Since they are unordered, <code>multinom</code> is better than
<code>polr</code>.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Find out which crime categories there are, and
arrange them in order of how many crimes there were in each
category.</li>
</ol>
<p>Solution</p>
<p>This can be the one you know, a group-by and summarize, followed
by <code>arrange</code> to sort:</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="logistic-regression-with-nominal-response.html#cb393-1"></a>sfcrime <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></span>
<span id="cb393-2"><a href="logistic-regression-with-nominal-response.html#cb393-2"></a><span class="kw">summarize</span>(<span class="dt">count=</span><span class="kw">n</span>()) <span class="op">%&gt;%</span></span>
<span id="cb393-3"><a href="logistic-regression-with-nominal-response.html#cb393-3"></a><span class="kw">arrange</span>(<span class="kw">desc</span>(count))</span></code></pre></div>
<pre><code>## # A tibble: 39 x 2
##    Category        count
##    &lt;chr&gt;           &lt;int&gt;
##  1 LARCENY/THEFT  174900
##  2 OTHER OFFENSES 126182
##  3 NON-CRIMINAL    92304
##  4 ASSAULT         76876
##  5 DRUG/NARCOTIC   53971
##  6 VEHICLE THEFT   53781
##  7 VANDALISM       44725
##  8 WARRANTS        42214
##  9 BURGLARY        36755
## 10 SUSPICIOUS OCC  31414
## # … with 29 more rows</code></pre>
<p>or this one does the same thing and saves a step:</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="logistic-regression-with-nominal-response.html#cb395-1"></a>sfcrime <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(Category) <span class="op">%&gt;%</span></span>
<span id="cb395-2"><a href="logistic-regression-with-nominal-response.html#cb395-2"></a><span class="kw">arrange</span>(<span class="kw">desc</span>(n))</span></code></pre></div>
<pre><code>## # A tibble: 39 x 2
##    Category            n
##    &lt;chr&gt;           &lt;int&gt;
##  1 LARCENY/THEFT  174900
##  2 OTHER OFFENSES 126182
##  3 NON-CRIMINAL    92304
##  4 ASSAULT         76876
##  5 DRUG/NARCOTIC   53971
##  6 VEHICLE THEFT   53781
##  7 VANDALISM       44725
##  8 WARRANTS        42214
##  9 BURGLARY        36755
## 10 SUSPICIOUS OCC  31414
## # … with 29 more rows</code></pre>
<p>For this one, do the <code>count</code> step first, to see what you
get. It produces a two-column data frame with the column of counts
called <code>n</code>. So now you know that the second line has to be
<code>arrange(desc(n))</code>, whereas before you tried <code>count</code>,
all you knew is that it was arrange-desc-something.</p>
<p>You need to sort in descending order so that the categories you want
to see actually do appear at the top.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="4" style="list-style-type: lower-alpha">
<li>Which are the four most frequent “interesting” crime
categories, that is to say, not including “other offenses” and
“non-criminal”? Get them into a vector called
<code>my.crimes</code>. See if you can find a way of doing this that
doesn’t involve typing them in (for full marks).</li>
</ol>
<p>Solution</p>
<p>The most frequent interesting ones are, in order, larceny-theft,
assault, drug-narcotic and vehicle theft.
The fact that “other offenses” is so big indicates that there
are a lot of possible crimes out there, and even 39 categories of
crime isn’t enough. “Non-criminal” means, I think, that the
police were called, but on arriving at the scene, they found that
no law had been broken.
I think the easy way to get the “top four” crimes out is to pull
them out of the data frame that <code>count</code> produces. They are
rows 1, 4, 5 and 6, so add a <code>slice</code> to your pipeline:</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="logistic-regression-with-nominal-response.html#cb397-1"></a>my.rows=<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)</span>
<span id="cb397-2"><a href="logistic-regression-with-nominal-response.html#cb397-2"></a>my.crimes =<span class="st"> </span>sfcrime <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(Category) <span class="op">%&gt;%</span></span>
<span id="cb397-3"><a href="logistic-regression-with-nominal-response.html#cb397-3"></a><span class="kw">arrange</span>(<span class="kw">desc</span>(n)) <span class="op">%&gt;%</span></span>
<span id="cb397-4"><a href="logistic-regression-with-nominal-response.html#cb397-4"></a><span class="kw">slice</span>(my.rows) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(Category)</span>
<span id="cb397-5"><a href="logistic-regression-with-nominal-response.html#cb397-5"></a>my.crimes</span></code></pre></div>
<pre><code>## [1] &quot;LARCENY/THEFT&quot; &quot;ASSAULT&quot;       &quot;DRUG/NARCOTIC&quot; &quot;VEHICLE THEFT&quot;</code></pre>
<p>I just want the <code>Category</code> column (as a vector), and
<code>pull</code> is the way to get that. (If I don’t do <code>pull</code>, I
get a data frame.)</p>
<p>If you can’t think of anything, just type them into a vector with
<code>c</code>, or better, copy-paste them from the console. But that’s a
last resort, and would cost you a point. If you do this, they have to
match exactly, UPPERCASE and all.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="5" style="list-style-type: lower-alpha">
<li>(Digression, but needed for the next part.) The R vector
<code>letters</code> contains the lowercase letters from <code>a</code> to
<code>z</code>. Consider the vector <code>('a','m',3,'Q')</code>. Some of
these are found amongst the lowercase letters, and some not. Type
these into a vector <code>v</code> and explain briefly why
<code>v %in% letters</code> produces what it does.</li>
</ol>
<p>Solution</p>
<p>This is the ultimate “try it and see”:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="logistic-regression-with-nominal-response.html#cb399-1"></a>v=<span class="kw">c</span>(<span class="st">&#39;a&#39;</span>,<span class="st">&#39;m&#39;</span>,<span class="dv">3</span>,<span class="st">&#39;Q&#39;</span>)</span>
<span id="cb399-2"><a href="logistic-regression-with-nominal-response.html#cb399-2"></a>v <span class="op">%in%</span><span class="st"> </span>letters</span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE FALSE</code></pre>
<p>The first two elements of the answer are <code>TRUE</code> because
lowercase-a and lowercase-m can be found in the lowercase letters
somewhere. The other two are false because the number 3 and the
uppercase-Q cannot be found anywhere in the lowercase letters.</p>
<p>The name is <code>%in%</code> because it’s asking whether each element of
the first vector (one at a time) is <em>in</em> the set defined by the
second thing: “is <code>a</code> a lowercase letter?” …
is “<code>Q</code> a lowercase letter?”
and getting the answers “yes, yes, no, no”.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="6" style="list-style-type: lower-alpha">
<li>We are going to <code>filter</code> only the rows of our data frame that
have one of the crimes in <code>my.crimes</code> as their
<code>Category</code>. Also, <code>select</code> only the columns
<code>Category</code>, <code>DayOfWeek</code> and <code>PdDistrict</code>. Save
the resulting data frame and display its structure. (You should have a
lot fewer rows than you did before.)</li>
</ol>
<p>Solution</p>
<p>The hard part about this is to get the inputs to <code>%in%</code> the
right way around. We are testing the things in <code>Category</code> one
at a time for membership in the set in <code>my.crimes</code>, so this:</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="logistic-regression-with-nominal-response.html#cb401-1"></a>sfcrimea =<span class="st"> </span>sfcrime <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Category <span class="op">%in%</span><span class="st"> </span>my.crimes) <span class="op">%&gt;%</span></span>
<span id="cb401-2"><a href="logistic-regression-with-nominal-response.html#cb401-2"></a><span class="kw">select</span>(<span class="kw">c</span>(Category,DayOfWeek,PdDistrict)) </span>
<span id="cb401-3"><a href="logistic-regression-with-nominal-response.html#cb401-3"></a>sfcrimea</span></code></pre></div>
<pre><code>## # A tibble: 359,528 x 3
##    Category      DayOfWeek PdDistrict
##    &lt;chr&gt;         &lt;chr&gt;     &lt;chr&gt;     
##  1 LARCENY/THEFT Wednesday NORTHERN  
##  2 LARCENY/THEFT Wednesday PARK      
##  3 LARCENY/THEFT Wednesday INGLESIDE 
##  4 VEHICLE THEFT Wednesday INGLESIDE 
##  5 VEHICLE THEFT Wednesday BAYVIEW   
##  6 LARCENY/THEFT Wednesday RICHMOND  
##  7 LARCENY/THEFT Wednesday CENTRAL   
##  8 LARCENY/THEFT Wednesday CENTRAL   
##  9 LARCENY/THEFT Wednesday NORTHERN  
## 10 ASSAULT       Wednesday INGLESIDE 
## # … with 359,518 more rows</code></pre>
<p>I had trouble thinking of a good name for this one, so I put an “a”
on the end. (I would have used a number, but I prefer those for
models.)</p>
<p>Down to a “mere” 359,000 rows. Don’t be stressed that the
<code>Category</code> factor still has 39 levels (the original 39 crime
categories); only four of them have any data in them:</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="logistic-regression-with-nominal-response.html#cb403-1"></a>sfcrimea <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(Category)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   Category           n
##   &lt;chr&gt;          &lt;int&gt;
## 1 ASSAULT        76876
## 2 DRUG/NARCOTIC  53971
## 3 LARCENY/THEFT 174900
## 4 VEHICLE THEFT  53781</code></pre>
<p>So all of the crimes that are left are one of the four Categories we
want to look at.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="7" style="list-style-type: lower-alpha">
<li>Save these data in a file <code>sfcrime1.csv</code>.</li>
</ol>
<p>Solution</p>
<p>This is <code>write_csv</code> again:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="logistic-regression-with-nominal-response.html#cb405-1"></a><span class="kw">write_csv</span>(sfcrimea,<span class="st">&quot;sfcrime1.csv&quot;</span>)</span></code></pre></div>
<p><span class="math inline">\(\blacksquare\)</span></p>
</div>
<div id="what-sports-do-these-athletes-play-1" class="section level2" number="28.12">
<h2><span class="header-section-number">28.12</span> What sports do these athletes play?</h2>
<p>The data at
<a href="http://ritsokiguess.site/datafiles/ais.txt">link</a> are physical
and physiological measurements of 202 male and female Australian elite
athletes. The data values are separated by <em>tabs</em>. We are going
to see whether we can predict the sport an athlete plays from their
height and weight.</p>
<p>The sports, if you care, are respectively basketball,
“field athletics” (eg. shot put, javelin throw, long jump etc.),
gymnastics, netball, rowing, swimming, 400m running, tennis, sprinting
(100m or 200m running), water polo.</p>
<ol style="list-style-type: lower-alpha">
<li>Read in the data and display the first few rows.</li>
</ol>
<p>Solution</p>
<p>The data values are separated by tabs, so <code>read_tsv</code> is
the thing:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="logistic-regression-with-nominal-response.html#cb406-1"></a>my_url &lt;-<span class="st"> &quot;http://ritsokiguess.site/datafiles/ais.txt&quot;</span></span>
<span id="cb406-2"><a href="logistic-regression-with-nominal-response.html#cb406-2"></a>athletes &lt;-<span class="st"> </span><span class="kw">read_tsv</span>(my_url)</span></code></pre></div>
<pre><code>## 
## ── Column specification ──────────────────────────────────────────────────────────────────
## cols(
##   Sex = col_character(),
##   Sport = col_character(),
##   RCC = col_double(),
##   WCC = col_double(),
##   Hc = col_double(),
##   Hg = col_double(),
##   Ferr = col_double(),
##   BMI = col_double(),
##   SSF = col_double(),
##   `%Bfat` = col_double(),
##   LBM = col_double(),
##   Ht = col_double(),
##   Wt = col_double()
## )</code></pre>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="logistic-regression-with-nominal-response.html#cb408-1"></a>athletes</span></code></pre></div>
<pre><code>## # A tibble: 202 x 13
##    Sex    Sport     RCC   WCC    Hc    Hg  Ferr   BMI   SSF `%Bfat`   LBM    Ht    Wt
##    &lt;chr&gt;  &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 female Netball  4.56  13.3  42.2  13.6    20  19.2  49      11.3  53.1  177.  59.9
##  2 female Netball  4.15   6    38    12.7    59  21.2 110.     25.3  47.1  173.  63  
##  3 female Netball  4.16   7.6  37.5  12.3    22  21.4  89      19.4  53.4  176   66.3
##  4 female Netball  4.32   6.4  37.7  12.3    30  21.0  98.3    19.6  48.8  170.  60.7
##  5 female Netball  4.06   5.8  38.7  12.8    78  21.8 122.     23.1  56.0  183   72.9
##  6 female Netball  4.12   6.1  36.6  11.8    21  21.4  90.4    16.9  56.4  178.  67.9
##  7 female Netball  4.17   5    37.4  12.7   109  21.5 107.     21.3  53.1  177.  67.5
##  8 female Netball  3.8    6.6  36.5  12.4   102  24.4 157.     26.6  54.4  174.  74.1
##  9 female Netball  3.96   5.5  36.3  12.4    71  22.6 101.     17.9  56.0  174.  68.2
## 10 female Netball  4.44   9.7  41.4  14.1    64  22.8 126.     25.0  51.6  174.  68.8
## # … with 192 more rows</code></pre>
<p>If you didn’t remember that, this also works:</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="logistic-regression-with-nominal-response.html#cb410-1"></a>athletes &lt;-<span class="st"> </span><span class="kw">read_delim</span>(my_url, <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## 
## ── Column specification ──────────────────────────────────────────────────────────────────
## cols(
##   Sex = col_character(),
##   Sport = col_character(),
##   RCC = col_double(),
##   WCC = col_double(),
##   Hc = col_double(),
##   Hg = col_double(),
##   Ferr = col_double(),
##   BMI = col_double(),
##   SSF = col_double(),
##   `%Bfat` = col_double(),
##   LBM = col_double(),
##   Ht = col_double(),
##   Wt = col_double()
## )</code></pre>
<p>(this is the R way of expressing “tab”.)</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="2" style="list-style-type: lower-alpha">
<li>Make a scatterplot of height vs. weight, with the points
coloured by what sport the athlete plays. Put height on the <span class="math inline">\(x\)</span>-axis
and weight on the <span class="math inline">\(y\)</span>-axis.</li>
</ol>
<p>Solution</p>
<p>I’m doing this to give you a little intuition for later:</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="logistic-regression-with-nominal-response.html#cb412-1"></a><span class="kw">ggplot</span>(athletes, <span class="kw">aes</span>(<span class="dt">x =</span> Ht, <span class="dt">y =</span> Wt, <span class="dt">colour =</span> Sport)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</span></code></pre></div>
<p><img src="pasias_files/figure-html/oz-multi-3-1.png" width="672" /></p>
<p>The reason for giving you the axes to use is (i) neither variable is
really a response, so it doesn’t actually matter which one goes on
which axis, and (ii) I wanted to give the grader something consistent
to look at.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="3" style="list-style-type: lower-alpha">
<li>Explain briefly why a multinomial model (<code>multinom</code>
from <code>nnet</code>) would be the best thing to use to predict sport
played from the other variables.</li>
</ol>
<p>Solution</p>
<p>The categories of <code>Sport</code> are not in any kind of order, and
there are more than two of them.
That’s really all you needed, for which two marks is kind of
generous.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="4" style="list-style-type: lower-alpha">
<li>Fit a suitable model for predicting sport played from
height and weight. (You don’t need to look at the results.) 100
steps isn’t quite enough, so set <code>maxit</code> equal to a larger
number to allow the estimation to finish.</li>
</ol>
<p>Solution</p>
<p>120 steps is actually enough, but any number larger than 110 is
fine. It doesn’t matter if your guess is way too high. Like this:</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="logistic-regression-with-nominal-response.html#cb413-1"></a><span class="kw">library</span>(nnet)</span>
<span id="cb413-2"><a href="logistic-regression-with-nominal-response.html#cb413-2"></a>sport<span class="fl">.1</span> &lt;-<span class="st"> </span><span class="kw">multinom</span>(Sport <span class="op">~</span><span class="st"> </span>Ht <span class="op">+</span><span class="st"> </span>Wt, <span class="dt">data =</span> athletes, <span class="dt">maxit =</span> <span class="dv">200</span>)</span></code></pre></div>
<pre><code>## # weights:  40 (27 variable)
## initial  value 465.122189 
## iter  10 value 410.089598
## iter  20 value 391.426721
## iter  30 value 365.829150
## iter  40 value 355.326457
## iter  50 value 351.255395
## iter  60 value 350.876479
## iter  70 value 350.729699
## iter  80 value 350.532323
## iter  90 value 350.480130
## iter 100 value 350.349271
## iter 110 value 350.312029
## final  value 350.311949 
## converged</code></pre>
<p>As long as you see the word <code>converged</code> at the end, you’re
good.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="5" style="list-style-type: lower-alpha">
<li>Demonstrate using <code>anova</code> that <code>Wt</code> should
not be removed from this model.</li>
</ol>
<p>Solution</p>
<p>The idea is to fit a model without <code>Wt</code>, and then show that
it fits significantly worse:</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="logistic-regression-with-nominal-response.html#cb415-1"></a>sport<span class="fl">.2</span> &lt;-<span class="st"> </span><span class="kw">update</span>(sport<span class="fl">.1</span>, . <span class="op">~</span><span class="st"> </span>. <span class="op">-</span><span class="st"> </span>Wt)</span></code></pre></div>
<pre><code>## # weights:  30 (18 variable)
## initial  value 465.122189 
## iter  10 value 447.375728
## iter  20 value 413.597441
## iter  30 value 396.685596
## iter  40 value 394.121380
## iter  50 value 394.116993
## iter  60 value 394.116434
## final  value 394.116429 
## converged</code></pre>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="logistic-regression-with-nominal-response.html#cb417-1"></a><span class="kw">anova</span>(sport<span class="fl">.2</span>, sport<span class="fl">.1</span>, <span class="dt">test =</span> <span class="st">&quot;Chisq&quot;</span>)</span></code></pre></div>
<pre><code>## Likelihood ratio tests of Multinomial Models
## 
## Response: Sport
##     Model Resid. df Resid. Dev   Test    Df LR stat.      Pr(Chi)
## 1      Ht      1800   788.2329                                   
## 2 Ht + Wt      1791   700.6239 1 vs 2     9 87.60896 4.884981e-15</code></pre>
<p>The P-value is very small indeed, so the bigger model <code>sport.1</code>
is definitely better (or the smaller model <code>sport.2</code> is
significantly worse, however you want to say it). So taking
<code>Wt</code> out is definitely a mistake.</p>
<p>This is what I would have guessed (I actually wrote the question in
anticipation of this being the answer) because weight certainly seems
to help in distinguishing the sports. For example, the field athletes
seem to be heavy for their height compared to the other athletes (look
back at the graph you made).</p>
<p><code>drop1</code>, the obvious thing, doesn’t work here:</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="logistic-regression-with-nominal-response.html#cb419-1"></a><span class="kw">drop1</span>(sport<span class="fl">.1</span>, <span class="dt">test =</span> <span class="st">&quot;Chisq&quot;</span>, <span class="dt">trace =</span> T)</span></code></pre></div>
<pre><code>## trying - Ht</code></pre>
<pre><code>## Error in if (trace) {: argument is not interpretable as logical</code></pre>
<p>I gotta figure out what that error is.
Does <code>step</code>?</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="logistic-regression-with-nominal-response.html#cb422-1"></a><span class="kw">step</span>(sport<span class="fl">.1</span>, <span class="dt">direction =</span> <span class="st">&quot;backward&quot;</span>, <span class="dt">test =</span> <span class="st">&quot;Chisq&quot;</span>)</span></code></pre></div>
<pre><code>## Start:  AIC=754.62
## Sport ~ Ht + Wt
## 
## trying - Ht 
## # weights:  30 (18 variable)
## initial  value 465.122189 
## iter  10 value 441.367394
## iter  20 value 381.021649
## iter  30 value 380.326030
## final  value 380.305003 
## converged
## trying - Wt 
## # weights:  30 (18 variable)
## initial  value 465.122189 
## iter  10 value 447.375728
## iter  20 value 413.597441
## iter  30 value 396.685596
## iter  40 value 394.121380
## iter  50 value 394.116993
## iter  60 value 394.116434
## final  value 394.116429 
## converged
##        Df      AIC
## &lt;none&gt; 27 754.6239
## - Ht   18 796.6100
## - Wt   18 824.2329</code></pre>
<pre><code>## Call:
## multinom(formula = Sport ~ Ht + Wt, data = athletes, maxit = 200)
## 
## Coefficients:
##         (Intercept)         Ht          Wt
## Field      59.98535 -0.4671650  0.31466413
## Gym       112.49889 -0.5027056 -0.57087657
## Netball    47.70209 -0.2947852  0.07992763
## Row        35.90829 -0.2517942  0.14164007
## Swim       36.82832 -0.2444077  0.10544986
## T400m      32.73554 -0.1482589 -0.07830622
## Tennis     41.92855 -0.2278949 -0.01979877
## TSprnt     51.43723 -0.3359534  0.12378285
## WPolo      23.35291 -0.2089807  0.18819526
## 
## Residual Deviance: 700.6239 
## AIC: 754.6239</code></pre>
<p>Curiously enough, it does. The final model is the same as the initial
one, telling us that neither variable should be removed.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="6" style="list-style-type: lower-alpha">
<li>Make a data frame consisting of all combinations of
<code>Ht</code> 160, 180 and 200 (cm), and <code>Wt</code> 50, 75, and 100
(kg), and use it to obtain predicted probabilities of athletes of
those heights and weights playing each of the sports. Display the
results. You might have to display them smaller, or reduce the
number of decimal places<a href="#fn49" class="footnote-ref" id="fnref49"><sup>49</sup></a>
to fit them on the page.</li>
</ol>
<p>Solution</p>
<p>This is (again) the easier way: fill vectors with the given
values, use <code>crossing</code> to get the combinations, and feed
that into <code>predict</code>, thus:</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="logistic-regression-with-nominal-response.html#cb425-1"></a>Hts &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">160</span>, <span class="dv">180</span>, <span class="dv">200</span>)</span>
<span id="cb425-2"><a href="logistic-regression-with-nominal-response.html#cb425-2"></a>Wts &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">75</span>, <span class="dv">100</span>)</span>
<span id="cb425-3"><a href="logistic-regression-with-nominal-response.html#cb425-3"></a>new &lt;-<span class="st"> </span><span class="kw">crossing</span>(<span class="dt">Ht =</span> Hts, <span class="dt">Wt =</span> Wts)</span>
<span id="cb425-4"><a href="logistic-regression-with-nominal-response.html#cb425-4"></a>new</span></code></pre></div>
<pre><code>## # A tibble: 9 x 2
##      Ht    Wt
##   &lt;dbl&gt; &lt;dbl&gt;
## 1   160    50
## 2   160    75
## 3   160   100
## 4   180    50
## 5   180    75
## 6   180   100
## 7   200    50
## 8   200    75
## 9   200   100</code></pre>
<p>and then</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="logistic-regression-with-nominal-response.html#cb427-1"></a>p &lt;-<span class="st"> </span><span class="kw">predict</span>(sport<span class="fl">.1</span>, new, <span class="dt">type =</span> <span class="st">&quot;probs&quot;</span>)</span>
<span id="cb427-2"><a href="logistic-regression-with-nominal-response.html#cb427-2"></a><span class="kw">cbind</span>(new, p)</span></code></pre></div>
<pre><code>##    Ht  Wt        BBall        Field          Gym      Netball          Row         Swim
## 1 160  50 2.147109e-03 5.676191e-03 7.269646e-02 0.1997276344 0.0320511810 0.0429354624
## 2 160  75 1.044581e-04 7.203893e-01 2.240720e-09 0.0716686494 0.0537984065 0.0291616004
## 3 160 100 5.541050e-08 9.968725e-01 7.530504e-19 0.0002804029 0.0009845934 0.0002159577
## 4 180  50 9.142760e-02 2.116103e-05 1.331347e-04 0.0233985667 0.0088717680 0.0137765580
## 5 180  75 7.787300e-02 4.701849e-02 7.184344e-11 0.1469948033 0.2607097148 0.1638164831
## 6 180 100 5.379479e-04 8.473139e-01 3.144321e-19 0.0074895973 0.0621366751 0.0157985864
## 7 200  50 6.907544e-01 1.399715e-08 4.326057e-08 0.0004863664 0.0004357120 0.0007843113
## 8 200  75 8.889269e-01 4.698989e-05 3.527126e-14 0.0046164597 0.0193454719 0.0140908812
## 9 200 100 2.738448e-01 3.776290e-02 6.884080e-21 0.0104894025 0.2056152576 0.0606015871
##          T400m       Tennis       TSprnt        WPolo
## 1 3.517558e-01 1.885847e-01 1.033315e-01 1.094045e-03
## 2 2.416185e-03 5.592833e-03 1.109879e-01 5.880674e-03
## 3 1.809594e-07 1.808504e-06 1.299813e-03 3.446523e-04
## 4 7.721547e-01 8.418976e-02 5.313751e-03 7.129763e-04
## 5 9.285706e-02 4.371258e-02 9.992310e-02 6.709478e-02
## 6 9.056685e-05 1.840761e-04 1.523963e-02 5.120898e-02
## 7 3.007396e-01 6.668610e-03 4.848339e-05 8.244005e-05
## 8 5.464293e-02 5.231368e-03 1.377496e-03 1.172154e-02
## 9 2.376695e-03 9.824069e-04 9.368804e-03 3.989581e-01</code></pre>
<p>I’ll take this, but read on for an improvement.</p>
<p>This still spills onto a second line (even printed this small). Let’s
round the predicted probabilities to 2 decimals, which, with luck,
will also kill the scientific notation:</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="logistic-regression-with-nominal-response.html#cb429-1"></a><span class="kw">cbind</span>(new, <span class="kw">round</span>(p, <span class="dv">2</span>))</span></code></pre></div>
<pre><code>##    Ht  Wt BBall Field  Gym Netball  Row Swim T400m Tennis TSprnt WPolo
## 1 160  50  0.00  0.01 0.07    0.20 0.03 0.04  0.35   0.19   0.10  0.00
## 2 160  75  0.00  0.72 0.00    0.07 0.05 0.03  0.00   0.01   0.11  0.01
## 3 160 100  0.00  1.00 0.00    0.00 0.00 0.00  0.00   0.00   0.00  0.00
## 4 180  50  0.09  0.00 0.00    0.02 0.01 0.01  0.77   0.08   0.01  0.00
## 5 180  75  0.08  0.05 0.00    0.15 0.26 0.16  0.09   0.04   0.10  0.07
## 6 180 100  0.00  0.85 0.00    0.01 0.06 0.02  0.00   0.00   0.02  0.05
## 7 200  50  0.69  0.00 0.00    0.00 0.00 0.00  0.30   0.01   0.00  0.00
## 8 200  75  0.89  0.00 0.00    0.00 0.02 0.01  0.05   0.01   0.00  0.01
## 9 200 100  0.27  0.04 0.00    0.01 0.21 0.06  0.00   0.00   0.01  0.40</code></pre>
<p>Better. Much better.</p>
<p><span class="math inline">\(\blacksquare\)</span></p>
<ol start="7" style="list-style-type: lower-alpha">
<li>For an athlete who is 180 cm tall and weighs 100 kg, what
sport would you guess they play? How sure are you that you are
right? Explain briefly.</li>
</ol>
<p>Solution</p>
<p>Find this height and weight in your predictions (it’s row 6). Look
along the line for the highest probability, which is 0.85 for
<code>Field</code> (that is, field athletics). All the other
probabilities are much smaller (the biggest of the others is
0.06). So this means we would guess the athlete to be a field
athlete, and because the predicted probability is so big, we are
very likely to be right.
This kind of thought process is characteristic of discriminant
analysis, which we’ll see more of later in the course.
Compare that with the scatterplot you drew earlier: the field
athletes do seem to be distinct from the rest in terms of
height-weight combination.
Some of the other height-weight combinations are almost equally
obvious: for example, very tall people who are not very heavy are
likely to play basketball. 400m runners are likely to be of
moderate height but light weight. Some of the other sports, or
height-weight combinations, are difficult to judge. Consider also
that we have mixed up males and females in this data set. We might
gain some clarity by including <code>Sex</code> in the model, and also
in the predictions. But I wanted to keep this question relatively
simple for you, and I wanted to stop from getting unreasonably
long. (You can decide whether you think it’s already too long.)</p>
<p><span class="math inline">\(\blacksquare\)</span></p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="36">
<li id="fn36"><p>For this, use <code>round</code>.<a href="logistic-regression-with-nominal-response.html#fnref36" class="footnote-back">↩︎</a></p></li>
<li id="fn37"><p>If you do not take out the <code>NA</code> values, they are shown separately on the end of the <code>summary</code> for that column.<a href="logistic-regression-with-nominal-response.html#fnref37" class="footnote-back">↩︎</a></p></li>
<li id="fn38"><p>The American Green party is more libertarian than Green parties elsewhere.<a href="logistic-regression-with-nominal-response.html#fnref38" class="footnote-back">↩︎</a></p></li>
<li id="fn39"><p>Northern Ireland’s political parties distinguish themselves by politics <em>and</em> religion. Northern Ireland has always had political tensions between its Protestants and its Catholics.<a href="logistic-regression-with-nominal-response.html#fnref39" class="footnote-back">↩︎</a></p></li>
<li id="fn40"><p>There are three political parties; using the first as a baseline, there are therefore <span class="math inline">\(3-1=2\)</span> coefficients for each variable.<a href="logistic-regression-with-nominal-response.html#fnref40" class="footnote-back">↩︎</a></p></li>
<li id="fn41"><p>It amuses me that Toronto’s current (2021) mayor, named Tory, is politically a Tory.<a href="logistic-regression-with-nominal-response.html#fnref41" class="footnote-back">↩︎</a></p></li>
<li id="fn42"><p>When you have variables that are categories, you might have more than one individual with exactly the same categories; on the other hand, if they had measured <em>Size</em> as, say, length in centimetres, it would have been very unlikely to get two alligators of exactly the same size.<a href="logistic-regression-with-nominal-response.html#fnref42" class="footnote-back">↩︎</a></p></li>
<li id="fn43"><p>Discovered by me two minutes ago.<a href="logistic-regression-with-nominal-response.html#fnref43" class="footnote-back">↩︎</a></p></li>
<li id="fn44"><p>There were only 216 alligators total, which is a small sample size for this kind of thing, especially with all those parameters to estimate.<a href="logistic-regression-with-nominal-response.html#fnref44" class="footnote-back">↩︎</a></p></li>
<li id="fn45"><p>You are almost certainly going to get the Capital Letters wrong in <em>DayOfWeek</em>, once, somewhere in the process. I did.<a href="logistic-regression-with-nominal-response.html#fnref45" class="footnote-back">↩︎</a></p></li>
<li id="fn46"><p>This is something we’ll see again in discriminant analysis.<a href="logistic-regression-with-nominal-response.html#fnref46" class="footnote-back">↩︎</a></p></li>
<li id="fn47"><p>The old base-R stuff like <code>cbind</code> makes some guesses about what you want. If it guesses right, it makes things work very smoothly, but if not, you can end up with some mysterious problems to debug. The old <code>read.table</code> for reading in data, likewise, used to turn text into <code>factor</code>s, <em>without telling you</em>. The tidyverse, on the other hand, requires you to be more explicit about what you want, or to have things be the same type, so that you don’t run into these kinds of things.<a href="logistic-regression-with-nominal-response.html#fnref47" class="footnote-back">↩︎</a></p></li>
<li id="fn48"><p>Statistical significance as an idea grew up in the days before “big data”.<a href="logistic-regression-with-nominal-response.html#fnref48" class="footnote-back">↩︎</a></p></li>
<li id="fn49"><p>For this, use <code>round</code>.<a href="logistic-regression-with-nominal-response.html#fnref49" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="logistic-regression-with-ordinal-response.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="survival-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["pasias.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
